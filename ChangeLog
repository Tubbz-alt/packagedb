== packagedb 0.3.8 ==

2008-10-09  Toshio Kuratomi <toshio@fedoraproject.org> - r413
The config file moved.

2008-10-09  Toshio Kuratomi <toshio@fedoraproject.org> - r412
Updates for the 0.3.8 release.

2008-10-09  Toshio Kuratomi <toshio@fedoraproject.org> - r411
Changes to hide the packager group.

2008-09-23  Toshio Kuratomi <badger@Clingman> - r410
Fix a unicode issue.

2008-09-22  Toshio Kuratomi <badger@Clingman> - r409
Fix for changing usernames to bz email addresses twice.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r408
Change add_edit_package() call to use kw args.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r407
Changes so packager is excluded by default but uberpackager is allowed.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r406
Update for new clone_branch() in python-fedora.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r405
Some clarifications and update for pkgdb.cfg => pkgdb.cfg.sample rename.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r404
Add Valholla's work on bz-sync and pkgdb-client.

2008-09-15  Toshio Kuratomi <badger@Clingman> - r403
Organize a bit better and remove one obsolete option.  This merges everything
we have in the fedora deployment that is generic.

2008-09-06  Mike Watters <valholla@fedoraproject.org> - r402
converted pkgdb-client from TurboGears to ConfigObj
2008-09-06  Mike Watters <valholla@fedoraproject.org> - r401
forgot to splitline the configspec
2008-09-06  Mike Watters <valholla@fedoraproject.org> - r400
Converted from TurboGears to ConfigObj
2008-09-03  Mike Watters <valholla@fedoraproject.org> - r399
merge
2008-09-01  Toshio Kuratomi <badger@Clingman> - r398
Add the script changes from Mike Watters.

2008-09-01  Toshio Kuratomi <badger@Clingman> - r397
Distribute the .cfg.sample file instead of pkgdb.cfg.

2008-09-01  Toshio Kuratomi <badger@Clingman> - r396
* Rename pkgdb.cfg to pkgdb.cfg.sample so people don't commit their fas
  username nad password by mistake.

2008-09-01  Toshio Kuratomi <badger@Clingman> - r395
Add a note about a problem in the update.

2008-08-25  Toshio Kuratomi <badger@Clingman> - r394
* Set package status to Approved when a package is unorphaned.

2008-08-22  Toshio Kuratomi <badger@Clingman> - r393
Add bugfixes to NEWS.

2008-08-22  Toshio Kuratomi <badger@Clingman> - r392
* Fix (un)orphaning of packages
* Fix shouldopen checkbox showing wrong information

2008-08-22  Toshio Kuratomi <badger@Clingman> - r391
Fix sending the pkg id.

2008-08-13  Toshio Kuratomi <badger@Clingman> - r390
* Port to python-fedora-0.3.x
* Sync with some changes in puppet on Fedora Infrastructure.  Need to move
config values to a config file and then we can run this from the package.

2008-08-13  Toshio Kuratomi <badger@Clingman> - r389
Fix a bug with the new code being more strict about non-keyword arguments.

2008-08-11  Toshio Kuratomi <badger@Clingman> - r388
Fix class on the pkglists so the javascript will continue to work.

2008-08-11  Toshio Kuratomi <badger@Clingman> - r387
Set user/pass to something generic again.

2008-08-09  Toshio Kuratomi <badger@Clingman> - r386
Update spec file for new release.

2008-08-09  Toshio Kuratomi <badger@Clingman> - r385
Update for new release.

== packagedb-0.3.7 ==
2008-08-09  Toshio Kuratomi <badger@Clingman> - r384
Merge from -stable in preparation for the release.

2008-08-09  Toshio Kuratomi <badger@Clingman> - r383
Merge tags from stable.

2008-08-09  Toshio Kuratomi <badger@Clingman> - r382
* Update AUTHORS since maploinhas done significantly more than stats at
  this point.
* Add NEWS file.
* Update for new release.

2008-08-08  Toshio Kuratomi <badger@Clingman> - r381
Merge orphan statuschange from maploin.

2008-08-08  Toshio Kuratomi <badger@Clingman> - r380
* Look for pkgdb.cfg in the same directory as setup.py.

2008-08-08  Toshio Kuratomi <badger@Clingman> - r379
Fix up calls for SA-0.4.

2008-08-08  Toshio Kuratomi <badger@Clingman> - r378
Fix output of notify(0 to list packages that have an owner but noone on the
watch* acls.

2008-08-08  Ionuț Arțăriși <mapleoin@fp.o> - r377
* server-scripts/pkgdb-status.in: new script to automatically change packagelisting statuses to orphaned/deprecated from mapleoin-devel
2008-08-06  Toshio Kuratomi <badger@Clingman> - r376
Fix statement for SA-0.4.

2008-08-06  Toshio Kuratomi <badger@Clingman> - r375
'cvsextras' => 'packager' which was breaking unorphaning of packages.

2008-08-05  Toshio Kuratomi <badger@Clingman> - r374
Fix javascript search via CDATA.

2008-08-05  Ionuț Arțăriși <mapleoin@fp.o> - r373
new letter pagination, search fixes and new bugzilla fixes
2008-08-05  Ionuț Arțăriși <mapleoin@fp.o> - r372
* pkgdb/cfg: replaced user/passwd with dummies
2008-08-02  Toshio Kuratomi <badger@Clingman> - r371
Update python-fedora requirement.

2008-08-02  Toshio Kuratomi <badger@Clingman> - r370
* Switch to using fedora.tg.utils.request_format to determine whether to use
  a json or html response.
* Switch to showing login errors via tg.flash.

2008-08-02  Toshio Kuratomi <badger@Clingman> - r369
Remove use of display name and human name for privacy concerns.

2008-08-02  Toshio Kuratomi <badger@Clingman> - r368
Finish major pylint refactoring with changes to worst offender: dispatcher.py.

2008-08-02  Toshio Kuratomi <badger@Clingman> - r367
Fix another place where "cvsextras" had to be made into generic 'group".

2008-08-02  Toshio Kuratomi <badger@Clingman> - r366
Fix edit_package() to create group listing for both packager and uberpackager,
not just packager (matches add_package).

2008-08-02  Toshio Kuratomi <badger@Clingman> - r365
pylint cleanup including some errors in the yum repo sync.

2008-08-01  Toshio Kuratomi <badger@Clingman> - r364
If we don't use comments, we also have to change "<" to &lt;... yes, even in
javscript.

2008-08-01  Toshio Kuratomi <badger@Clingman> - r363
Remove comment marker from script tag so tg.url gets expanded.

2008-07-31  Toshio Kuratomi <badger@Clingman> - r362
Restore ordering to user pakcage list and the collecitons listed there.

2008-07-31  Toshio Kuratomi <badger@Clingman> - r361
Move from importing model to importing specific classes in model.

2008-07-28  Toshio Kuratomi <badger@Clingman> - r360
* Add packager as a legal group; remove cvsextras.

2008-07-27  Toshio Kuratomi <badger@Clingman> - r359
Make AccountSystem import use python-fedora 0.3 location.

2008-07-27  Toshio Kuratomi <badger@Clingman> - r358
Disambiguate the "report Bugs" link on the sidebar.

2008-07-25  Toshio Kuratomi <badger@Clingman> - r357
* Add json_props for package list to return which collections a package is in.

2008-07-24  Toshio Kuratomi <badger@Clingman> - r356
Merge maploin's fixes to search and new bug reports.

2008-07-24  Toshio Kuratomi <badger@Clingman> - r355
Fix notification list to not include packages and packagelistings which are
no longer in the repository (ie: not approved status).

2008-07-24  Toshio Kuratomi <badger@Clingman> - r354
Add state argument to message() in CollectionName validator.

2008-07-22  Toshio Kuratomi <badger@Clingman> - r353
Add a statuschange column to packagelisting and orphan and deprecated statuses
to packagelistingstatuscode.

2008-07-21  Toshio Kuratomi <badger@Clingman> - r352
* Rename jsonProps => json_props for the new python-fedora.

2008-07-21  Toshio Kuratomi <badger@Clingman> - r351
* pkgdb/json.py: No longer needed as we've moved this to python-fedora.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r350
Fix search box javascript.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r349
Fix changelog.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r348
Update for 0.3.6 release.

== packagedb-0.3.6 ==
2008-07-16  Toshio Kuratomi <badger@Clingman> - r347
Make sure watchcommit and watchbugzilla acls are approved if we use them.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r346
Make error message for nitfylist better.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r345
Correct use of action_url variable.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r344
* Optimize and simplify search code.
* Make search return a list of packages instead of a list of lists of
  packagelistings.
* Style for PackageList.
* Display releases that the package is orphaned in.
* Make pkglist handle descriptions and releases.
* Update for new pkglist func.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r343
Move collection filter into its own file and five it an action param so it
can be used generically.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r342
More pylint fixes:
  - Remove unused imports
  - Split long lines
  - Remove excess whitespace
  - Import only what's needed from sqlalchemy.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r341
* Fix to pkglist so it doesn't spit out a <ul> for each entry.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r340
* Pylint cleanups including four errors in the code.
  - listqueries.py, controllers.py, and validators.py have been cleaned of all
    things that can be fixed without API changes now.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r339
Rename acls to listqueries as it's growing beyond acl lists.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r338
* Sync new version of jsonify_validation_errors from python-fedora
* Fix iteration of the collectionList.

2008-07-16  Toshio Kuratomi <badger@Clingman> - r337
Fix the CollectionNameVersion validator.  chained validators use different
parameters and different parameters to the Invalid exception.

2008-07-15  Toshio Kuratomi <badger@Clingman> - r336
* Update the notify html template to submit via POST.
  - Have labels for the filter boxes.
  - Fix versions to show all the possible versions.  Next step is some
    javascript to update the display to only have versions for the selected
    collection.

2008-07-15  Toshio Kuratomi <badger@Clingman> - r335
Re-add css for the filter box that was mistakenly removed when we merged
search functionality.

2008-07-14  Toshio Kuratomi <badger@Clingman> - r334
Merge with -devel branch.

2008-07-14  Toshio Kuratomi <badger@Clingman> - r333
Whitespace

2008-07-14  Casey Dahlin <cdahlin@redhat.com> - r332
More generic adding of acls to new packages

2008-07-14  Casey Dahlin <cdahlin@redhat.com> - r331
Add uberpackager to new packages

=== packagedb-0.3.5 ===
2008-06-21  Toshio Kuratomi <badger@Clingman> - r334
* pkgdb/templates/layout.html: Fix search URL.

2008-06-21  Toshio Kuratomi <badger@Clingman> - r333
* Turn username password params to BaseClient into keywordargs.  This makes the
  call compatible with BaseClient 0.3.

2008-06-16  Toshio Kuratomi <badger@Clingman> - r332
* Fix request_format to be a function call.

2008-06-16  Toshio Kuratomi <badger@Clingman> - r331
* Add Casey.

2008-06-16  Ionuț Arțăriși <mapleoin@lavabit.com> - r330
* merged with mapleoin-devel for package search functionality

=== packagedb-0.3.4 ===
2008-06-10  Toshio Kuratomi <badger@Clingman> - r329
* pkgdb/acls.py: Fix problem introduced by pylint refactoring.

2008-06-09  Toshio Kuratomi <badger@Clingman> - r328
* ChangeLog: Update for new release.

2008-06-09  Toshio Kuratomi <badger@Clingman> - r327
* Merge should_open fixes from Casey.

2008-06-09  Toshio Kuratomi <badger@Clingman> - r326
* start-pkgdb.in: Fix problem that prevents start-pkgdbfrom working when
  installed from rpm.  Needed to assign the path before calling pkg_resources.

2008-06-08  Toshio Kuratomi <badger@Clingman> - r325
* ChangeLog: Update for new release.

2008-06-06  Toshio Kuratomi <badger@Clingman> - r324
* Import fixes from publictest10.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r323
* pkgdb/templates/pkgpage.html: Not quite fixed.  Leave a note for Casey.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r322
* pkgdb/dispatcher.py: Fix the arguments to the method.  Due to the way our
  javascript submission works, it has to use containerId.
* pkgdb/static/javascript/pkgpage.js: Fix an array dereference and the name of
  the toggle method on the server.
* pkgdb/templates/pkgpage.html: Set the class on this checkbox so our
  javascript code can find it.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r321
* pkgdb/controllers.py: Remove debug statement when we read from the UserCache.
  We've established that that works now.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r320
* pkgdb/templates/pkgpage.html: One more fix -- Have to index into the array.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r319
* pkgdb/templates/pkgpage.html: Fix the should open toggle.  It's set on the
  package, not on the packagelisting.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r318
* pkgdb/dispatcher.py: Fix correct return status from the new toggle method.

2008-06-05  Toshio Kuratomi <badger@Clingman> - r317
Merge release changes from -stable.

2008-06-05  Casey Dahlin <cdahlin@redhat.com> - r316
Merged Toshio's requestContainer addition

2008-06-05  Casey Dahlin <cdahlin@redhat.com> - r315
Made acls.py group-ambiguous

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r314
Alert about errors when shouldopen cannot be set

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r313
Add error handling to shouldopen action

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r312
Added callback to set shouldopen when clicked

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r311
Changed shouldopen handler to a toggle

2008-06-03  Toshio Kuratomi <badger@Clingman> - r310
* pkgdb/dispatcher.py: set_shouldopen(): Fix the method prototype.
  - Small optimization.
  - Return a value on success otherwise we'll get a traceback.

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r309
Added dispatcher api to set shouldopen on Package

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r308
Add checkbox to pkgpage.html to set shouldopen

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r307
Make model expose the shouldopen field of the Package table

2008-06-03  Casey Dahlin <cdahlin@redhat.com> - r306
Add shouldopen field to Package table

2008-05-20  Toshio Kuratomi <badger@Clingman> - r305
* pkgdb/templates/layout.html: version changed case in the -devel branch.

2008-05-20  Toshio Kuratomi <badger@Clingman> - r304
Footer info from -stable.

2008-05-10  Toshio Kuratomi <badger@Clingman> - r303
* pkgdb/acls.py: Cleanup SA-0.4 usage:
  - Import specific classes from model.py instead of importing the whole model
    namespace.
  - No longer need to use the .c for attributes of SA classes.  Change from:
    Package.c.name to Package.name.

2008-05-10  Toshio Kuratomi <badger@Clingman> - r302
* pkgdb/acls.py: Only import what we need from sqlalchemy.

2008-05-10  Toshio Kuratomi <badger@Clingman> - r301
* server-scripts/pkgdb-sync-bugzilla.in: Add owner to the initial cclist so
  that comaintainers who take over a bug do not have to do this manually.
  packagedb ticket #112.

2008-05-10  Toshio Kuratomi <badger@Clingman> - r300
* pkgdb/acls.py: merge from -stable a fix for owners being assigned from
  random branches to own a package.

2008-05-08  Toshio Kuratomi <badger@Clingman> - r299
* pkgdb/templates/paginator.html: Add a link to show all the data being
  paginated on a single page.

2008-05-07  Toshio Kuratomi <badger@Clingman> - r298
* pkgdb/bugs.py: Move some things that are the same throughout the life of the
  program from __init__ to the class level.
  - Fix bugs to return an error if there package name specified does not
    exist.

2008-05-07  Toshio Kuratomi <badger@Clingman> - r297
Merge to -devel on server.

2008-05-07  Toshio Kuratomi <badger@Clingman> - r296
* pkgdb/static/css/pkgdb.css: Stylesheet for the filter box.
* pkgdb/templates/userpkgs.html: Add a filter box to specify which acls to
  filter the results on.
  - Add a count of packages in the result set.
* pkgdb/users.py: Take acls as a list value since that's how checkboxes come
  to TG methods.
  - No longer take acl "any".
  - Return acls as a list of three-tuples for the acl, an acl name, and
    whether the acl was set on the previous page.
  - Return a count of packages

2008-05-01  Toshio Kuratomi <badger@Clingman> - r295
* pkgdb/users.py: Fix change of variable name EOL => eol.

2008-05-01  Toshio Kuratomi <badger@Clingman> - r294
* pkgdb/templates/collectionoverview.html: Whitespace.

2008-05-01  Toshio Kuratomi <badger@Clingman> - r293
* pkgdb/config/app.cfg: Reorganize the authentication provider.

2008-05-01  Toshio Kuratomi <badger@Clingman> - r292
* pkgdb.cfg: Revert sqlalchemy.dburi to a good generic upstream string.

2008-05-01  Toshio Kuratomi <badger@Clingman> - r291
* AUTHORS: Add mapleoin as an AUTHOR.

2008-04-30  Toshio Kuratomi <badger@Clingman> - r290
Merge pkgdb-sync-bugzilla script from -stable.

2008-04-30  Toshio Kuratomi <badger@Clingman> - r289
* README: Merge changes for install from checkout instructions.

2008-04-30  Ionuț Arțăriși <mapleoin@lavabit.com> - r288
merged with mapleoin-devel for Stats
2008-04-12  Toshio Kuratomi <badger@Clingman> - r287
* Merge a revert from the -stable branch to develCollections to fix a bug.

2008-04-12  Toshio Kuratomi <badger@Clingman> - r286
* Merge the stable branch which includes SQLAlchemy-0.4 porting.

2008-03-11  Toshio Kuratomi <badger@Clingman> - r285
* pkgdb/config/app.cfg: Add some genshi options for utf-8 and xhtml.

2008-03-11  Toshio Kuratomi <badger@Clingman> - r284
* pkgdb/releases.py: Update for the new fedorahosted locations.

2008-03-11  Toshio Kuratomi <badger@Clingman> - r283
* setup.py: Require a certain version of python-fedora so we can get the
  jsonfasprovider.

2008-02-17  Toshio Kuratomi <badger@Clingman> - r282
* pkgdb/__init__.py: Fix typo in docstring.

2008-02-12  Toshio Kuratomi <badger@Clingman> - r281
* Update files which have changed since Jan 1 with a 2008 Copyright.

2008-02-09  Toshio Kuratomi <badger@Clingman> - r280
* pkgdb/json.py: Fix import of sqlalchemy.
* start-pkgdb.in: Instead of requiring TurboGears directly, require
  fedora_packagedb.  That way we can specify which version of SQLAlchemy is
  necessary to work.

2008-02-09  Toshio Kuratomi <badger@Clingman> - r279
* Pull in changes from the pylint branch to clean up most pylint warnings.

2008-02-09  Toshio Kuratomi <badger@Clingman> - r278
* pkgdb.cfg: Fix the logging setup for TG-1.0.4

2008-02-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r277
* pkgdb/collections.py, pkgdb/packages.py: Simplify the code that detects
  whether we need to return a json error code or use an html template.
  - Fix a bug where errors were only being returned for html.

2008-02-02  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r276
* pkgdb/json.py: revert previous change.  This is being fixed in turbojson
  instead.

2008-02-02  Toshio Kuratomi <badger@Clingman> - r275
* pkgdb/json.py: Fix to work around a bug in newer TurboJSON when used with
  SQLAlchemy.

=== packagedb-0.3.3.1 ===

2008-05-20  Toshio Kuratomi <badger@Clingman> - r144
* fedora-packagedb.spec, pkgdb/release.py: Bump release for new version.

2008-05-20  Toshio Kuratomi <badger@Clingman> - r143
* pkgdb/templates/layout.html: Add information about which app server and
  pkgdb version sent this information.

2008-05-10  Toshio Kuratomi <badger@Clingman> - r142
* pkgdb/acls.py: bugzilla(): Only select from active/in development releases.
  - Prioritise ownership when there are different owners for different
    releases: The algorithm selects devel branch, then highest numbered
    release.  Real people are alwayspreferred over orphan.

=== packagedb-0.3.3.apr30 ===

2008-04-25  Toshio Kuratomi <badger@Clingman> - r141
* pkgdb/config/log.cfg: Add timestamp to access.log output.

2008-04-23  Toshio Kuratomi <badger@Clingman> - r140
* server-scripts/pkgdb-sync-bugzilla.in: Fix email sending.
  - Speed up lookup of bugzill_email addresses by precaching all fas
    information.

2008-04-23  Toshio Kuratomi <badger@Clingman> - r139
* server-scripts/pkgdb-sync-bugzilla.in: Remove dependence on website.py.

2008-04-21  Toshio Kuratomi <badger@Clingman> - r138
* pkgdb.cfg: Fix logger configuration.

2008-04-21  Toshio Kuratomi <badger@Clingman> - r137
* server-scripts/pkgdb-sync-bugzilla.in: Clean up imports and have this use
  simplejson instead of python-json.

2008-04-21  Toshio Kuratomi <badger@Clingman> - r136
* server-scripts/pkgdb-sync-bugzilla.in: Add changes from ricky to make this
  function with FAS2.

2008-04-21  Toshio Kuratomi <badger@Clingman> - r135
* setup.py: Add the bugzilla script to be built and installed.
* server-scripts/bz-make-components-pkgdb.py:  Rename to pkgdb-sync-bugzilla.in.
* server-scripts/pkgdb-sync-repo.in, server-scripts/pkgdb-sync-bugzilla.in:
  Add GPL header.

2008-04-21  Toshio Kuratomi <badger@Clingman> - r134
* server-scripts/bz-make-components-pkgdb.py: Import script to make bugzilla
  components for new packages.

2008-04-12  Toshio Kuratomi <badger@Clingman> - r133
* pkgdb/dispatcher.py: Revert the change that pulls the develCollection on
  initialization as it causes SQLAlchemy errors.

=== packagedb-0.3.3 ===

2008-04-11  Toshio Kuratomi <badger@Clingman> - r132
* ChangeLog: Update the ChangeLog for new release.

2008-04-11  Toshio Kuratomi <badger@Clingman> - r131
* fedora-packagedb.spec: Update the spec.

2008-04-11  Toshio Kuratomi <badger@Clingman> - r130
* fedora-packagedb.spec, pkgdb/release.py: Bump for new release.

2008-04-11  Toshio Kuratomi <badger@Clingman> - r129
Merge the SQLAlchemy-0.4 branch to stable.

2008-04-08  Toshio Kuratomi <badger@Clingman> - r128
* pkgdb/controllers.py: Pull the response code fix from the sa0.4 branch.

2008-04-08  Toshio Kuratomi <badger@Clingman> - r127
* pkgdb/acls.py: Pull fix from sa0.4 branch for new python-fedora.

2008-03-19  Ricky Zhou <ricky@Max> - r126
Fix error in users.py

=== packagedb-0.3.2.8 ===

2008-03-18  Ricky Zhou <ricky@Max> - r125
Move fas.py to python-fedora, update version requirement in the spec.

2008-03-18  Ricky Zhou <ricky@Max> - r124
Missed a line for the FAS2 changeover.

2008-03-14  Ricky Zhou <ricky@Max> - r123
Remove unused imports.

2008-03-14  Ricky Zhou <ricky@Max> - r122
Eliminate FAS1 dependence.  Not tagging this version until more testing can be done.  fas.py might be better in python-fedora later on.

=== packagedb-0.3.2.7 ===

2008-03-13  Ricky Zhou <ricky@Max> - r121
A few more FAS2 bugfixes.

=== packagedb-0.3.2.6 ===

2008-03-12  Ricky Zhou <ricky@Max> - r120
Fix one more FAS2 template problem.

2008-03-12  Ricky Zhou <ricky@Max> - r119
hosted.fp.o/projects/ => hosted.fp.o/

2008-03-12  Ricky Zhou <ricky@Max> - r118
Various small bugfixes, preparing for release, but not tagging yet.

=== packagedb-0.3.2.5 ===

2008-03-12  Ricky Zhou <ricky@Max> - r117
Fix a bunch of FAS1-isms that I missed.

=== packagedb-0.3.2.4 ===

2008-03-12  Ricky Zhou <ricky@Max> - r116
Increment version.

2008-03-12  Ricky Zhou <ricky@Max> - r115
Prepare for 0.3.2.4 release.

2008-03-12  Ricky Zhou <ricky@Max> - r114
Update templates to use FAS2's user object.

2008-03-12  Ricky Zhou <ricky@Max> - r113
Add BuildRequires: python-genshi to build successfully in mock.

2008-03-12  Ricky Zhou <ricky@Max> - r112
Add configs for FAS2 auth.

=== packagedb-0.3.2.3 ===

2008-01-23  Toshio Kuratomi <badger@Clingman> - r274
* fedora-packagedb.spec: Add buildrequires for python-genshi.

2008-01-23  Toshio Kuratomi <badger@Clingman> - r273
* setup.py: Set __requires__ TurboGears so we pull in the proper version of
  CherryPy.

2008-01-23  Toshio Kuratomi <badger@Clingman> - r272
* Update ChangeLog for new release.

2008-01-23  Toshio Kuratomi <badger@Clingman> - r271
* fedora-packagedb.spec, pkgdb/release.py: Bump release for new version.

2008-01-23  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r270
* pkgdb/users.py: Add checks to only select packages if they are active
  (ie: Not removed, obsolete, etc.)

2008-01-23  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r269
* Merge new layout.html.  This necessitated adding empty <head> tags to
  all the page templates.

2008-01-23  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r268
* pkgdb.sql: Add a view that associates a count of all the packages in each
  collection.
* pkgdb/collections.py: Modifications to get rid of SelectResults when we move
  to TG-1.0.4 (and paginate supports the sqlalchemy.orm.query object).
  - index(), id(): Allow returning json from these functions.
  - index(): Use the new view instead of having to join tables ourselves to
    get the package count.
  - id(): No longer raise redirect to get the error page, instead substitute
    the template.
    + Use new sqlalchemy API for getting the collection information and then
      save the results into a dictionary for passing back to the template.
  - unknown(), not_id(): Remove these as we no longer raise a redirect to get
    to them.
* pkgdb/json.py: Add handling for Query objects.
* pkgdb/model.py: Add the new CollectionPackage view.
* pkgdb/templates/collectionpage.html: collection information is now a dict
  instead of an object so access its members using bracket notation.

2008-01-23  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r267
* pkgdb.sql: Remove comments about reorganizing the Acls as that's already
  done and in the schema.

2007-12-18  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r266
* pkgdb/templates/layout.html: fedora.css has moved.

2007-12-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r265
* ChangeLog: Update for last minute changes.

2007-12-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r264
* fedora-packagedb.spec: Set mode and owner on the log directory.

2007-12-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r263
* ChangeLog: Update for release.

2007-12-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r262
* fedora-packagedb.spec, pkgdb/release.py: Bump version.

2007-12-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r261
* pkgdb/acls.py: Acls::vcs(), Acls::bugzilla(): Use the new
  AccountSystem::get_users() method to retrieve information about users.

2007-11-29  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r260
* pkgdb/bugs.py: BugList::__convert(): explicitly return the bug fields we're
  interested in instead of the complete bug object.  That way JSON encoding of
  the data works.
* pkgdb/templates/login.html, pkgdb/templates/overview.html: Minor reformatting
* pkgdb/templates/pkgheader.html: py:strip() the html tag.
* fedora-packagedb.spec, pkgdb.cfg: Add directories to log to.
* pkgdb/yumrepo.py: Log to the pkgdb.repo target.
  - Allow yum repodata format 9 as well as 10.

2007-11-24  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r259
* pkgdb/templates/plain/bugzillaacls.txt: Escape backslash and pipe.

2007-11-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r258
* ChangeLog: Update.

2007-11-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r257
* pkgdb/bugs.py: Nasty hack to take care of misdirected requests for isos.
  - Bugs::default(): If we are given extra arguments in the URL, construct
    a url that goes to either mirrors.fp.o or download.fp.o and redirect there.

2007-11-14  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r256
* ChangeLog: Update.

2007-11-14  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r255
* MANIFEST.in: Add the repo sync script.
* fedora-packagedb.spec: Add the repo sync script.

2007-11-14  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r254
* ChangeLog: Update the ChangeLog.

2007-11-14  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r253
* fedora-packagedb.spec, pkgdb/release.py: Update to 0.3.2.1.

2007-11-14  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r252
* pkgdb/acls.py: Acls:: Get the statuscodes for Approved and Removed.
  - Acls::bugzilla(): do not output acls for a package that is not Approved.
  - Acls::vcs(): Do not output acls when the package has been removed.

2007-11-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r251
* pkgdb/static/javascript/pkgpage.js: Strip the aclName and StatusName fields
  so we make sure we match against acls and statuses correctly.

2007-11-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r250
* pkgdb/static/javascript/framework.js: Add a strip method to the String class.
  This let's us strip whitespace (or other chars) like in python.

2007-11-11  Ricky Zhou <ricky@fedoraproject.org> - r249
Fix invalid markup (add type attribute on script and remove stray <html> tags).

2007-11-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r248
* pkgdb/templates/pkgpage.html: Fix links to spec files.  Before, only the
  links to the devel branch worked.

2007-11-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r247
* pkgdb/static/javascript/tooltip.js: Removed in favor of the jquery code.
* pkgdb/static/css/jquery.tooltip.css: CSS styling for jquery tooltips.
* pkgdb/static/images/shadow2.png: Background for fnacy jquery tooltip.
* pkgdb/static/javascript/jquery.dimensions.js: jquery module for calcuating
  dimensions of HTML block elements.
* pkgdb/static/javascript/jquery.tooltip.js: jquery module for displaying
  tooltips.
* pkgdb/static/images/favicon.ico: New favicon that looks a bit better.
* pkgdb/static/javascript/collectionoverview.js: Use jquery instead of our
  MochiKit to module to display the tooltip.  This will pay off when we
  consolidate all these jQuery widgets in one static dir for Bodhi, PackageDB,
  etc.
* pkgdb/templates/collectionoverview.html: Include the jquery libraries.
  - Include the tooltip messages as titles of the table headers since that's
    where jquery expects to find them.
* pkgdb/templates/layout.html: Add favicon.

2007-11-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r246
* pkgdb/yumrepo.py: sync_package_descriptions(): Optimize a bit.  Bring
  time down from 2:34s to 1:54s by only opening each repo's database file
  once.

2007-11-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r245
* server-scripts/: Directory for scripts run on the server.
* server-scripts/pkgdb-sync-repo.in: script to sync summary and description
  from the yum repository into the db.  Can be run on a daily cron job.
* yum.repos.d/fedora-8-updates-testing.repo, yum.repos.d/fedora-8-updates.repo,
  yum.repos.d/fedora-8.repo: Create new repo files for Fedora 8.
* pkgdb.cfg: Add a default basedir to the config file.
* pkgdb/yumrepo.py: RepoInfo: Get approvedStatus from the pkgdb database.
  - sync_package_descriptions(): Scan all packages so that we can update
    descriptions which have changed.
    + Also check summaries.
    + Go through the repositories in a set order so we don't toggle back and
      forth with older descriptions.
* setup.py: Add the pkgdb-sync-repo script.
* yum.repos.d/fedora-olpc-2.repo: Change the name of the olpc repo to more
  closely approximate the other repos.

2007-11-08  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r244
* pkgdb/templates/pkgpage.html: Add some invisible text to the spec file link
  so text browsers have a chance to display something there.

2007-11-08  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r243
* pkgdb/templates/pkgheader.html: Pull the links to koji, bodhi, etc into a
  widget.
* pkgdb/templates/pkgbugs.html, pkgdb/templates/pkgpage.html: Use the pkgheader
  widget to create the menu of outside services referencing the package.

2007-11-08  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r242
* pkgdb/static/images/emblem-cvs-controlled.png: Icon for the CVS Repository
  taken from gnome-icon-theme.
* pkgdb/static/css/pkgdb.css: Add style sheet to display the cvs icon.
* pkgdb/templates/pkgpage.html: Abstract creating a URL excaped version of the
  package name to a py:with in the body tag.  This allows us to use that
  everywhere in the template instead of calling quote_plus() each time.
  - Add a link to the cvs repository (viewcvs) along with Koji, Bodhi, etc.
  - Add a link to the package spec files for each release that is Approved.

2007-10-31  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r241
* pkgdb/templates/layout.html: Use https instead of http to retrieve the css.

2007-10-30  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r240
* pkgdb.cfg: New url/queryurl for differentiating between the server we need
  to contact to get bug information and the bugzilla url we need for public
  links.
* pkgdb/bugs.py: Replace the bzBug() class with a BugList() class.  BugList()
  takes bugzilla.bug data structures and converts to unicode as well as
  transforming the queryurls into public urls.
* pkgdb/templates/bugoverview.html: Add a small header that explains what to
  do on this page.

2007-10-30  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r239
* fedora-packagedb.spec: Fix the sqlalchemy Requires.

2007-10-29  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r238
* ChangeLog: Update.

2007-10-29  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r237
* pkgdb.cfg: Change another hostname to localhost.
* pkgdb/notifier.py: Remove a short piece of debugging that kept email from
  being sent.

2007-10-29  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r236
* pkgdb/dispatcher.py: Fix an error in exception handling for allowing
  a user to take an acl.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r235
* ChangeLog: Update once more.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r234
* pkgdb/dispatcher.py: Allow packager as well as cvsextras to do the right
  thing once we rename the group.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r233
* ChangeLog: Update once more.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r232
* pkgdb/templates/layout.html: Add the bug list page to the navigation links.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r231
* ChangeLog: Update for 0.3.2 release.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r230
* fedora-packagedb.spec, pkgdb/release.py: Bump release to 0.3.2.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r229
* pkgdb/bugs.py: Split the bug code into its own controller.
  - Create an overview page that lists all packages via index().
  - Display buglist for a package via the default() method.
* pkgdb/static/images/pkgdb.png: Small icon for the packageDB.
* pkgdb/templates/bugoverview.html: Template for the bug overview page.
* pkgdb/packages.py: Split bug information into bugs.py:Bug() class.
  - Move setting the Bugzilla URL to the config file.
* pkgdb/templates/pkglist.html: Take a mode argument.  If mode == 'name',
  create links to the package information page.  If mode == 'bugs', create
  link to the package bugs page.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r228
* pkgdb/notifier.py: Log messages when mail is disabled to the debug filter
  instead of the warning filter.

2007-10-28  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r227
* pkgdb.cfg: Make settings more generic... replace hosts with localhost, use
  generic email addresses, etc.
  - Set the bugzilla url.
* pkgdb/config/app.cfg: Move sqlalchemy.convert_unicode here as the code assumes
  that sqlalchemy will do the unicode conversion for us.

2007-10-27  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r226
* pkgdb/dispatcher.py: Fix syntax error when catching the AclNotAllowdError.

2007-10-27  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r225
* pkgdb/dispatcher.py: AclNotAllowedError: New exception that raises when
  a person is not allowed on an acl.
  - _acl_can_be_held_by_user(): Take an acl and either an user/group tuple
    from fas or work on the current identity to decide if the user is allowed
    on the acl.
  - toggle_owner(), set_acl_status(), toggle_acl_request(), add_package(),
    edit_package(): Use _acl_can_be_held_by_user() instead of duplicating
    code in all these functions.
    + Always allow removing an acl (Obsolete or Deny) whether or not the user
      is allowed on the acl (in case they were added due to a flaw while
      importing the owners in the firt place.)

2007-10-26  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r224
* pkgdb/static/css/pkgdb.css: Add a groupacls class that's treated like the
  acls group.
* pkgdb/templates/pkgpage.html: Tabs to spaces.
  - Sort the list of users so that they are alphabetical by user.
  - Separate the acls for users, groups, and the add myself to package button
    into separate tables.

2007-10-26  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r223
* pkgdb/static/javascript/pkgpage.js: Correctly position the new acl row
  right after the existing user acls when a user hits the add myself to
  package button.
  - Load the initial event handler using jquery.
* pkgdb/templates/layout.html: Include the jquery library.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r222
* pkgdb/packages.py: BzBug: New class that changes the fields we use in the
  bugzilla return data into unicode.  We should fix this in python-bugzilla
  at some point.
  - Packages::__init__(): Setup the bugzilla server here.
  - Packages::bugs(): Convert query fields to unicode before sending to the
    template.
* pkgdb/static/css/pkgdb.css: Entry for the packageDB link, handle the buglist
  the same way as the pkglist.
* pkgdb/templates/pkgbugs.html: Remove style information from the template and
  reindent.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r221
* pkgdb/static/images/bugz.png: Icon for the bug information.
* pkgdb/packages.py: Packages::bugs(): Port skvidal's Fedora bug retrieval
  code into the method.
* pkgdb/templates/pkgbugs.html: Port skvidal's Fedora bug temlate into a
  pkgdb template.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r220
* pkgdb/notifier.py: Use the logging methods to record turbomail debugging
  information.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r219
* pkgdb/static/css/fedora.css, pkgdb/static/css/style.css: Migrate to using the
  vanilla fedora.css file plus overrides in the pkgdb.css.
* pkgdb/static/css/pkgdb.css: Add all the css needed for the pkgdb to function
  here.
* pkgdb/templates/collectionpage.html: Properly label the headers in the
  collection information table.
* pkgdb/templates/layout.html: Switch to using fedoraproject.org/css/fedora.css
  for the majority of the look.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r218
* pkgpage/templates/pkgpage.html: Rename links to Bodhi/Koji to be more
  friendly to end users.
  - Add a link to package bugs.

2007-10-25  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r217
* pkgdb/templates/pkgpage.html: Various cleanups: No longer use a PI to define
  koji and bodhi urls.
  - Substitute spaces for tabs.
  - Change a reduce(lambda) construct into a list comprehension.

2007-10-24  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r216
* pkgdb/notifiery.py: Merge notifier changes from -devel.

2007-10-24  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r215
* pkgdb/dispatcher.py: Allow any pseudo user account to own a package, not
  just orphan.
  - Make the error message when trying to set a non-cvsextras user to be
    slightly less cryptic.

2007-10-24  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r214
* pkgdb/static/javascript/jquery-1.2.1.js: Add the jquery library.

2007-10-24  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r213
* Require sqlalchemy between 0.3 and 0.4.

2007-10-19  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r212
* pkgdb/templates/collectionoverview.html: Correct the name of the tooltip.js
  javascript library to include.

2007-10-19  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r211
* pkgdb/static/javascript/famework.js: Spinner now lives in pkgdb/static in
  the dev instance as well.

2007-10-17  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r210
* ChangeLog: Update.

2007-10-17  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r209
* pkgdb/dispatcher.py: PackageDispatcher::_create_or_modify_group_acl(): Fix
  typo in name of build acl.
  - toggle_groupacl_status(): Change variable used in log message from one that
    was deleted in refactoring.
  - add_package(): Rename group variable to plural form.
    + Change variable used in error message to one available at this point in
      the method.
  - edit_package(): Rename group variable to plural form.
    + Allow orphan user to be assigned ownership of the package.
    + Change variables used in several error messages to variables present
      when the variable is used.
* pkgdb/json.py: import orm from sqlalchemy for use in one of the methods.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r208
* Fixes to build scripts from the stable branch.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r207
* Update ChangeLog

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r206
* pkgdb/dispatcher.py: No longer set the checkout acl for comaintainers.
  There's currently no acls limiting checkout in cvs and it's not part of the
  UI so we don't want it set.  Technically, the checkout acl for cvsextras
  covers the current situation.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r205
* start-pkgdb.in: Fix a bug looking for the old config file name instead of
  pkgdb.cfg.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r204
* pkgdb/templates/overview.html: Fix a typo.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r203
* pkgdb/dispatcher.py: Remove some debugging statements.
  - PackageDispatcher::set_acl_status(), add_package(), edit_package(): Check
    that the person is allowed to own or have commit acls on a package before
    assigning them those powers.

2007-10-16  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r202
* pkgdb/dispatcher.py: Remove SelectResults as it's not necessary for use with
  SA-0.3.10.
  - PackageDispatcher::__init__(): Move groups that can have package acls to
    the class level.
  - _send_log_msg(): Return aclUsers via Query instead of SelectResults.
  - _create_or_modify_acl(), _create_or_modify_group_acl(): When the commit
    acl changes, change the build acl to match.
  - set_acl_status(): Don't check whether the user is in cvsextras or cvsadmin
    as we check later whether they're allowed to make changes.
  - toggle_groupacl_status(): Don't check whether the user is in cvsextras or
    cvsadmin as we check later whether they're allowed to make changes.
    + Use _create_or_modify_group_acl() to change the group acl instead of
      duplicating code here.
    + Minor changes to the variables we're logging since we got rid of many
      local variables when we use _create_or_modify_group_acl().
  - toggle_acl_request(): Use _create_or_modify_acl() to make changes instead
    of duplicating code here.
* pkgdb/templates/pkgpage.html: Filter out acls that we don't display when
  deciding whether to show an entry for a user in the acl list.

2007-10-15  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r201
* pkgdb/yumrepo.py: Fix ticket#87, descriptions mixed up.  Looks like the SA
  session code has a hash collision somewhere that it's not handling the way
  we expect.  closing the session after every package instead of a complete
  package sync fixes the problem.

2007-10-13  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r200
* pkgdb/yumrepo.py: Logging fixes.

2007-10-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r199
* pkgdb/templates/pkgbugs.html: Template from Seth Vidal for displaying bugs
  on Fedora Packages.
* fedora-packagedb.spec: Require python-bugzilla.
* pkgdb/packages.py: Add a bugs controller method.

2007-10-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r198
* start-pkgdb.in: Add a config option that tells where the pkgdb code is
  installed.
  - Due to changes to how we import os.path, change some function calls.

2007-10-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r197
* pkgdb/notifier.py, pkgdb/dispatcher.py: Move the email handling to an
  EventLogger class in its own file.  This can eventually be changed to
  send notification to a server, send email, log to the db, etc.

2007-10-12  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r196
* pkgdb/yumrepo.py: New files with several classes for dealing with yum repos.
  - RepoUpdater: is intended for grabbing yum repoMD files from the repository.
    It may need to be run from a separate process (via cron) due to it using
    an extra 1-2 MB of memory whenever it kicks off.
  - RepoInfo: Creates an SA model to connect to the repo primaryMD sqlite
    caches.  Currently has one method to sync package descriptions against the
    repository information.
* pkgdb/controllers.py: Fix a typo in a comment.
* pkgdb/json.py, pkgdb/model.py: Move SABase from the model to json.py.  This
  allows us to more easily inherit SABase in different files.  (Like the
  models in yumrepo.)
* yum.repos.d/, yum.repos.d/fedora-3-extras.repo,
  yum.repos.d/fedora-4-extras.repo, yum.repos.d/fedora-5-extras.repo,
  yum.repos.d/fedora-6-extras.repo, yum.repos.d/fedora-7-updates-testing.repo,
  yum.repos.d/fedora-7-updates.repo, yum.repos.d/fedora-7.repo,
  yum.repos.d/fedora-development.repo, yum.repos.d/fedora-epel-4-testing.repo,
  yum.repos.d/fedora-epel-4.repo, yum.repos.d/fedora-epel-5-testing.repo,
  yum.repos.d/fedora-epel-5.repo, yum.repos.d/fedora-olpc-2.repo: Yum
  repository information files.  These allow us to use yum to download the
  repository metadata from the yum repos for Fedora.  We are grabbing nearly
  everything relevant to the package db (FE3+, F7, F-devel, EL4+, and OLPC).

2007-10-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r195
* ChangeLog: Update ChangeLog.

2007-10-09  Toshio くらとみ <toshio@publictest1.fedora.phx.redhat.com> - r194
* fedora-packagedb.spec, pkgdb/release.py: Bump release number to 0.3.1.2
* pkgdb/controllers.py, pkgdb/templates/overview.html: Take the PackageDB
  Version from the release.py file.

2007-10-09  Toshio リッチ Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r193
* pkgdb/users.py: Get approvedStatus and EOLStatus on class creation.
  - Users::packages(): Revamp to take an acl and an EOL parameter.  These
    control whether we filter out EOL distributions from the list and what acls
    we want to generate a list for.
  - Remove special handling of the orphan userid as the normal code path will
    handle this.
  - Return the error by changing the template instead of raising a redirect.
    This makes URLs better.

2007-10-09  Toshio リッチ Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r192
* pkgdb/dispatcher.py: Encode the debugging statements to ascii, explicitly
  handling non-ascii characters in the output.

2007-10-09  Toshio リッチ Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r191
* setup.py: Make setup.py executable on its own.

2007-10-02  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r190
* ChangeLog: One last update.

2007-10-02  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r189
* fedora-packagedb.spec: Really bump the version to 0.3.1.1
* start-pkgdb.in: New directory name is fedora-packagedb.
  - Set sys.path earlier as setting the configfile needs to knwo about it
    as well.

2007-10-02  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r188
* ChangeLog: Update ChangeLog for final.

2007-10-02  Toshio Kuratomi <badger@Clingman> - r187
* pkgdb/release.py: Bump version.

2007-10-02  Toshio Kuratomi <badger@Clingman> - r186
* fedora-packagedb.spec, setup.py: Add requires.

2007-10-02  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r185
* Merge a massive reorganization of files.

2007-09-25  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r184
* pkgdb/pkgdb/dispatcher.py: Set default sender to contain a "Full Name" so
  we don't confuse the cvsextras commits list script.

2007-09-24  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r183
* pkgdb/pkgdb/config/app.cfg: Move turbomail configuration to
  dev.cfg/app.cfg.  This allows us to turn it on for the production server
  and off for the test server.
* pkgdb/pkgdb/dispatcher.py: Move debugging statements out to send_msg()
  because the decision as to who to send from is now there.
  - Now set sender to the setting email.sender from the config file instead
    of the person making the change: PackageDB Bug #60.

2007-09-24  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r182
* pkgdb/pkgdb/dispatcher.py: Updated wording of ownership change emails to
  sound less like spam.

2007-09-21  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r181
* pkgdb/pkgdb/dispatcher.py: Fix printing of email messages during debugging.

2007-09-21  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r180
* pkgdb/pkgdb/packages.py: Packages::name(): Optimize the information sent
  via json.  Instead of sending all of the status and status translations
  over and over, send a map of statuscodes to their C statusname.  This
  reduces the size of kernel/Fedora/7?tg_format=json which has a lot of
  comaintainers by about half.

2007-09-20  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r179
* pkgdb/pkgdb/packages.py: Packages::name(): Make error messages work for JSON
  as well as WebUI.
    + Fix collection handling to return an error if no collection matches the
      given filter and a separate error is given if no packages exist for a
      collection.

2007-09-19  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r178
* pkgdb/pkgdb/dispatcher.py: Fix typo in documentation.

2007-09-17  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r177
* pkgdb/pkgdb/templates/pkgpage.html: Fix detection of wheter a person can
  change acls.  Before, it was presenting the acl changing UI if anyone had
  approveacls, not just the current user.
  - Add more comments to the code that determines if the current user can
    change acls.

2007-09-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r176
* pkgdb/pkgdb/packages.py: Packages::name(): Take collectionName and
  collectionVersion as optional additional parameters.  We use these to
  filter by distro or distro-release.
    + return status=False if there's any problems retrieving the package data.
  - Packages::id(): Return status=False if there's problems.

2007-09-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r175
* pkgdb/pkgdb/packages.py: Packages::name(), Packages::id(): Change from
  raise redirect to get to an error page to return dict(tg_template=error).
  This is good for two reasons:
  1) Not as problematic when dealing with json.
  2) When changing a URL in the browser's addressbar and mispelling something,
     this makes it easier to edit the entry in the addressbar to be correct.

2007-09-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r174
* pkgdb/pkgdb/packages.py: Packages::index(), Packages::name(): Skip packages
  which have Status Removed.

2007-09-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r173
* pkgdb/pkgdb/packages.py: Add owneruser to the list of values that are
  jsonified for packageListings.

2007-09-12  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r172
* pkgdb/pkgdb/dispatcher.py: The devel branch shouldn't send email about the
  test commits that happen here.  Disable it.

2007-09-12  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r171
* pkgdb/pkgdb/json.py: Propagate the jsonProps variable to all descendent
  elements.
* pkgdb/pkgdb/model.py: SABase::__json__(): Update to a new scheme.  Take any
  SA mapped class and create json output for it.  For the fields which are
  directly backed by the database, the fields are automatically pulled in.
  For other fields, check the jsonProps instance variable to see if the
  programmer has explicitly requested that the variable be propogated.
  - StatusTranslations::.__json__(), BaseStatus::.__json__(): No longer need
    special cased json functions here as the base classes __json__ handles
    it fine.
* pkgdb/pkgdb/packages.py: Packages::name(): Use the new code __json__()
  methods to handle this.

2007-09-12  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r170
* pkgdb/pkgdb/templates/pkgpage.html: Simplify the template a little by using
  tg.selector(), tg.checker(), and genshi's py:choose.

2007-08-26  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r169
* pkgdb/pkgdb/templates/pkgpage.html: Properly escape the urls sent to
  koji and bodhi.  (Fixes Bug #53).

2007-08-26  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r168
* pkgdb/pkgdb/static/javascript/mochikit1.4.js: Split mochikit 1.4 functions
  out of framework.js so we can clearly specify what's under the MochiKit
  license and what's under our license.
* README: Small update to status.
* genacls.pkgdb, owner-sync-pkgdb, pkgdb-client, pkgdb-import.py,
  pkgdb-login.py, pkgdb.sql, pkgdb/pkgdb/acls.py, pkgdb/pkgdb/collections.py,
  pkgdb/pkgdb/controllers.py, pkgdb/pkgdb/dispatcher.py, pkgdb/pkgdb/json.py,
  pkgdb/pkgdb/model.py, pkgdb/pkgdb/packages.py, pkgdb/pkgdb/release.py,
  pkgdb/pkgdb/static/css/fedora.css, pkgdb/pkgdb/static/css/pkgdb.css,
  pkgdb/pkgdb/static/css/style.css,
  pkgdb/pkgdb/static/javascript/collectionoverview.js,
  pkgdb/pkgdb/static/javascript/framework.js,
  pkgdb/pkgdb/static/javascript/pkgpage.js,
  pkgdb/pkgdb/static/javascript/tooltip.js, pkgdb/pkgdb/templates/layout.html,
  pkgdb/pkgdb/templates/overview.html, pkgdb/pkgdb/users.py, pkgdb/setup.py,
  pkgdb2branch.py: Add GPLv2 License and copyright notices .

2007-08-26  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r167
* pkgdb.conf: Configuration is now managed in puppet.  Please see the puppet
  repository for changes.

2007-08-26  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r166
* tg-autostart.cgi: We now use supervisor.

2007-08-26  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r165
* Merge new users changes from NigelJ.
* pkgdb/pkgdb/users.py: Order the packagelist by packagename.

2007-08-23  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r164
* pkgdb/pkgdb/dispatcher.py: Change from using display name to human name in
  subject of emails as mailman's topic filtering doesn't handle unicode.

2007-08-23  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r163
* pkgdb/pkgdb/dispatcher.py: Merge changes from stable branch to open acls
  to cvsextras for new packages.

2007-08-23  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r162
* pkgdb.sql: Comment out hte drop database call for safety.

2007-08-17  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r161
* pkgdb/pkgdb/static/javascript/collectionoverview.js: Signal handlers to
  show tooltips when the user hovers over a column heading.
* pkgdb/pkgdb/static/javascript/tooltip.js: Widget for displaying tooltips.
* pkgdb/pkgdb/static/css/fedora.css: Style for tooltips and a class invisible
  to set any widget as invisible.
* pkgdb/pkgdb/templates/collectionoverview.html: Change to show an explanation
  of what a column means when a user hovers over a column.

2007-08-17  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r160
* pkgdb/pkgdb/templates/pkgpage.html: Fix setting cvsextras when there are
  no people in aclGroups.

2007-08-16  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r159
* pkgdb/pkgdb/templates/errors.html: Fix kid-ism that was causing error page
  to throw an error.

2007-08-15  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r158
* pkgdb/pkgdb/dispatcher.py: Make all exposed methods take a tg_format
  query parameter to accept json.

2007-08-15  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r157
* pkgdb/pkgdb/acls.py: Have to @expose(allow_json=True) after any other
  expose statements.  Fixes vcs and bugzilla.

2007-08-15  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r156
* pkgdb/pkgdb/templates/plain, pkgdb/pkgdb/templates/plain/__init__.py: New
  module for plain text templates.
* pkgdb/pkgdb/templates/plain/bugzillaacls.txt: Template for plain text
  representation of bugzilla acls.
  pkgdb/pkgdb/templates/plain/vcsacls.txt: Template for plain text
  representation of vcs acls.  Note that vcs acls could now be generated
  directly from this (and a header).
  pkgdb/pkgdb/acls.py: Acls::vcs(): Add ability to retrieve plain text.
    + Exclude the orphan user through SQL, not python.
  - Acls::bugzilla(): Add a method for retrieving plain text.
* pkgdb/pkgdb/templates/orphans.html: No longer needed since the functionality
  has been merged into the users area.

2007-08-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r155
* pkgdb/pkgdb/templates/orphans.html: Remove orphans as we're now doing it
  through userpkgs.
* pkgdb/pkgdb/templates/userpkgs.html: If we get the orphan user, don't link
  to info and acllist pages.
* pkgdb/pkgdb/users.py: Allow users to override the paginate defaults.
  - Allow the lists to return json.

2007-08-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r154
* pkgdb/pkgdb/templates/pkglist.html, pkgdb/pkgdb/templates/collectionpage.html,
  pkgdb/pkgdb/templates/orphans.html, pkgdb/pkgdb/templates/pkgoverview.html,
  pkgdb/pkgdb/templates/useroverview.html,
  pkgdb/pkgdb/templates/userpkgs.html: Move pkglist into its own file.
* pkgdb/pkgdb/users.py: Users::packages(), Users::acllist():
    + Allow users to override paginate.  Set default to 100 packages.
    + Minor cleanup to query.  Use and_() instead of multiple queries.
  - User::orphans(): Rewrite to work with paginate.

2007-08-14  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r153
* pkgdb/pkgdb/dispatcher.py: Add a link to the packageDB page where ACLs
  are changed when emailing a log message.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r152
* pkgdb/pkgdb/users.py: Resurrect the orphan packages code.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r151
* pkgdb/pkgdb/templates/master.kid, pkgdb/pkgdb/templates/welcome.kid,
  pkgdb/pkgdb/controllers.py: Remove the test class and the kid templates
  that it depended on.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r150
* pkgdb/pkgdb/templates/paginator.html: Pull the navigation element for
  pagination into a macro in its own file.
  - Have the navigation bar not display if there's only one page.
* pkgdb/pkgdb/templates/collectionpage.html,
  pkgdb/pkgdb/templates/pkgoverview.html, pkgdb/pkgdb/templates/pkgpage.html,
  pkgdb/pkgdb/templates/userpkgs.html: Move the navigation element to a
  macro.
  - Put the navigation element at the top and bottom of the list of things
    that are paginated.
  - Clean up notes on future implementation and put those into tickets
    in trac instead.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r149
* pkgdb/pkgdb/templates/layout.html: Link to the hosted project instead of
  the wiki for external documentation.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r148
* merge fixes from the stable branch.

2007-08-13  Toshio Kuratomi <badger@Clingman> - r147
* pkgdb/pkgdb/static/images/bodhi.png, pkgdb/pkgdb/static/images/koji.png:
  Images to go with the links to Koji and Bodhi.
* pkgdb/pkgdb/static/css/pkgdb.css, pkgdb/pkgdb/static/css/style.css:
  Updagte for a cleaner pkgpage.
* pkgdb/pkgdb/templates/login.html: Don't need tg.url when dealing with
  ${previous_url}.
* pkgdb/pkgdb/templates/pkgpage.html: Add links to koji nad bodhi.

2007-08-13  Toshio Kuratomi <badger@Clingman> - r146
* COPYING: Copy of the GPLv2.

2007-08-13  Toshio Kuratomi <badger@Clingman> - r145
* Merge in ricky's template changes.
* pkgdb/pkgdb/static/css/style.css, pkgdb/pkgdb/static/css/fedora.css: New
  css to bring us the same look and feel as the rest of Fedora Infrastructure.
* pkgdb/pkgdb/templates/bugzillaacls.kid =>
  pkgdb/pkgdb/templates/bugzillaacls.html,
  pkgdb/pkgdb/templates/collectionoverview.kid =>
  pkgdb/pkgdb/templates/collectionoverview.html,
  pkgdb/pkgdb/templates/collectionpage.kid =>
  pkgdb/pkgdb/templates/collectionpage.html,
  pkgdb/pkgdb/templates/errors.kid => pkgdb/pkgdb/templates/errors.html,
  pkgdb/pkgdb/templates/layout.kid => pkgdb/pkgdb/templates/layout.html,
  pkgdb/pkgdb/templates/login.kid => pkgdb/pkgdb/templates/login.html,
  pkgdb/pkgdb/templates/orphans.kid => pkgdb/pkgdb/templates/orphans.html,
  pkgdb/pkgdb/templates/overview.kid => pkgdb/pkgdb/templates/overview.html,
  pkgdb/pkgdb/templates/pkgoverview.kid =>
  pkgdb/pkgdb/templates/pkgoverview.html,
  pkgdb/pkgdb/templates/pkgpage.kid => pkgdb/pkgdb/templates/pkgpage.html,
  pkgdb/pkgdb/templates/useroverview.kid =>
  pkgdb/pkgdb/templates/useroverview.html,
  pkgdb/pkgdb/templates/userpkgs.kid => pkgdb/pkgdb/templates/userpkgs.html,
  pkgdb/pkgdb/templates/vcsacls.kid => pkgdb/pkgdb/templates/vcsacls.html:
  Convert kid templates to genshi.
* pkgdb/pkgdb/config/app.cfg: Make the default template engine genshi.
* pkgdb/pkgdb/sqlobject-history: Remove unneeded directory.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r144
* pkgdb/pkgdb/dispatcher.py: Fix a typo where groups needed to be plural.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r143
* pkgdb/pkgdb/dispatcher.py: Use author's real name as well as email
  address when sending a message about changes.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r142
* pkgdb/dev.cfg, pkgdb/pkgdb/config/app.cfg: From address is now whatever user
  made the change.   Default recipients is now a hash where the keys are the
  recipients to include.
* pkgdb/pkgdb/dispatcher.py: send_msg(): from address is now the user making
  the change.
  - PackageDispatcher._send_log_msg(): Retrieve default recipients from the
    config file.  Should now send to the commits list (ticket #24).
  - add_package(), edit_package(): Fix capitalization of cvsextrasBuildAcl.
    + Since the backref, changeAcl.status isn't set, have to retrieve the
      acl name for the log from the database.
* pkgdb/pkgdb/model.py: PersonPackageListingAcl, GroupPackageListingAcl:
  Make the statuscode optional so it can be set later.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r141
*  pkgdb/pkgdb/dispatcher.py: Remove extraneous "package" in email subject.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r140
* pkgdb/pkgdb/dispatcher.py: set_acl_status(): Fix typo: close argument list.
  - set_acl_status(), toggle_groupacl_status(), toggle_acl_request(),
    add_package(), edit_package(): Change format of email subject to have
    less information and put pkg name first Bug #35.
  - edit_package(): Changing groups has to be done on every branch that is
    sent to us.  Add a loop to deal with that.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r139
* pkgdb/pkgdb/model.py: Fix docstring to reference correct DB table.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r138
* pkgdb/pkgdb/static/javascript/pkgpage.js: set_acl_approval_box(): Make
  sure we don't generate double slashes in our urls.

2007-08-13  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r137
* pkgdb/pkgdb/dispatcher.py: PackageDispatcher::add_package() edit_package():
  Log creation of new cvsextras acls.

2007-08-12  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r136
* pkgdb/pkgdb/dispatcher.py:
  - Remove CVSEXTRAS_ID and use the existing PackageDispatcher::groups
    attribute instead.
  - PackageDispatcher::__init__(): Add reverse mappings to self.groups so
    we can retrieve by group id or by name.
  - PackageDispatcher::_create_or_modify_acl(): Pass in a status DB object
    instead of statusName.  Everyplace we use this we're already going to
    have looked this up so there's no need to do it again.
  - PackageDispatcher()::_create_or_modify_group_acl(): New method that
    creates or modifies a group acl.  toggle_group_acl() is redundant with
    this and needs to be changed as discussed in ticket #38
  - PackageDispatcher::edit_package(): Add code to handle groups.

2007-08-12  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r135
* Merge comma fix.

2007-08-10  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r134
* pkgdb/pkgdb/dispatcher.py: Define the CVSEXTRAS id so we don't have to look it
  up.
  - toggle_groupacl_status(): Value being returned as new status was not
    uptodate.  Change to the actual new status.
  - add_package(), edit_package(): Create group acls for the cvsextras group. 
    Make it so that it can't commit by default but is present.
* pkgdb/pkgdb/model.py: GroupPackageListing: allow packagelistingid to be
  specified after the fact.

2007-08-10  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r133
* pkgdb/pkgdb/static/javascript/framework.js: make_request(): Add a comma
  to fix a bug when we changed the argument list.

2007-08-09  Toshio Kuratomi <badger@Clingman> - r132
* pkgdb/pkgdb/static/javascript/framework.js: make_request(): Fix construction
  of the url so that we don't have double slashes (which confuse the server).

2007-08-09  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r131
* pkgdb/pkgdb/templates/layout.kid: Fix the Documentation link.
* pkgdb/pkgdb/templates/pkgpage.kid: Fix the webUI to allow cvsadmins to
  set acls.

2007-08-06  Toshio Ernie Kuratomi <toshio@publictest1.fedora.phx.redhat.com> - r130
* pkgb/pkgdb/templates/overview.kid: Revamp the frontpage for release.  News,
  plans, development, etc moved to the hosted project.

2007-08-01  Toshio Kuratomi <badger@Clingman> - r129
* owner-sync-pkgdb: Sync owner information from the packagedb to koji.
  Canonical location for this script is currently on cvs-int in CVSROOT/admin.
* pkgdb-client: Add or update packages from the commandline if you are a
  cvsadmin.  Canonical location for this script is currently on cvs-int in
  CVSROOT/admin.
* pkgdb-import.py: Update to new db server db2.
  - Workaround a broken pkg.acl entry.
  - Special case the lvm packages.
* pkgdb2branch.py: Update BASEURL to point at test3.
  - Check for message on error instead of msg.

2007-08-01  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r128
* pkgdb.sql: Add a new status 'Modified', for use in Logs to show that metadata
  has changed.
* pkgdb/pkgdb/dispatcher.py: _create_or_modify_acl(): Set the personAcl on the
  list of acls in the personpackagelisting and the personpackagelisting in the
  list of people in the packagelisting.  This is because all our logic iterates
  through the lists to tell whether to create a new record or not.
  - toggle_owners(), set_acl_status(), toggle_groupacl_status(), add_package(),
    edit_package(): Check for the proper groups (cvsextras, cvsadmin) after we
    get into the function proper.  This is because the authorization not
    allowed page will just confuse the AJAX call.
  - add_package(), edit_package(): Replace select_by with get_by as we're
    searching for a single record on unique keys in all cases.
    + Check retrieval of user information from the fas.  If we get an error,
      cancel the transaction and send an error back to the calling function.
    + Fix reference to person.id from FAS to be person['id'].
    + Set Collection information in new pkgListings via the property.
    + Fix references to statuscode to be statuscodeid.
  - edit_package(): Use the modified status for the log when changing summary.
    + For objects passed in to the function (collections, ccList, comaintList)
      decode the objects from JSON.
    + Fix a conflict of two pieces of information using the variable name
      collection.
    + Fix logMessage generation to use pkgListing to pull information instead
      of pkg which doesn't have the necessary information about collections.
    + Fix references to identity.current.user_id to be
      identity.current.user.user_id.
    + Fix typo wathcommits => watchcommits.
* pkgdb/pkgdb/model.py: PersonPackageListing(): Make the packagelistingid
  optional in the constructor so we can add it later via the property.

2007-07-30  Toshio Kuratomi <toshio@tiki-lounge.com> - r127
* pkgdb/pkgdb/templates/errors.kid: Modify the error page template to use
  message instead of msg.

2007-07-30  Toshio Kuratomi <toshio@tiki-lounge.com> - r126
* pkgdb/pkgdb/packages.py, pkgdb/pkgdb/users.py: Change msg into message in
  return values so that client code can look in message for error messages.
  Maybe we want to use tg_flash for this in the future.

2007-07-30  Toshio Kuratomi <badger@Clingman> - r125
* pkgdb2branch.py: Rewrite invokation of mkbranchwrapper to work with popen2
  as well as subprocess (for python 2.3).

2007-07-30  Toshio Kuratomi <badger@Clingman> - r124
* pkgdb2branch.py: New commandline client to take information from the packagedb
  and make cvs branches from it.

2007-07-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r123
* pkgdb/pkgdb/dispatcher.py: _create_or_modify_acl(), set_acl_status(): Status
  is needed for both methods, extract it in both places and fix capitalization
  to use it properly.

2007-07-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r122
* pkgdb/pkgdb/dispatcher.py: Corrections to use of get_by() when using
  keyword arguments.

2007-07-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r121
* Merge corrections to documentation from warren.

2007-07-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r120
* pkgdb/pkgdb/dispatcher.py:
  - _send_log_msg(): Add an otherEmail argument that is a list of other Email
    addresses to send to.
    + Make the pkglisting argument a list of pkgListings.  That way when we
      send a message to everyone on a pkg, the information can be sent to the
      correct people.  This affects *every* method call to _send_log_msg().
  - _user_can_set_acls(): Hardcode a check to allow mizmo the ability to access
    the admin interface so she can see everything that takes place there.
  - _create_or_modify_acl(): Abstract the acl setting code so it can be called
    from other methods.
  - toggle_owner(): Set the log to reference the packagelisting.
  - set_acl_status(): Move acl setting code to _create_or_modify_acl().
  - add_package(): New method to add a package to the db.  Only usable by
    cvsadmin right now.
  - edit_package(): New method to allow cvadmins to edit the packages.
* pkgdb/pkgdb/model.py: Package(): Let the id's be set after init.
  - Add PackageLog().

2007-07-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r119
* pkgdb.conf: Remove the configuration to autostart the script.  We're moving to
  supervisor this weekend.
* pkgdb/dev.cfg: Turn on sqlalchemy debug echoing.

2007-07-20  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r118
* pkgdb/pkgdb/dispatcher.py: _send_log_msg(): Add an otherEmail argument
  for a list of arbitrary email addresses to send the message to.
    + A few bugfixes to add to the recipient list only when the new recipient
      exists.
  - Bugfix calls to _user_can_set_acls() to pass in the whole identity instead
    of just the userid.
  - toggle_acl_request(): Bugfix to call _send_log_msg() instead of send_msg().

2007-07-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r117
* pkgdb/pkgdb/dispatcher.py: _send_log_msg(): Give an acl field as well.  This
  lets us specify that people on any number of different acls will get
  notified.

2007-07-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r116
* pkgdb/dev.cfg: Database has moved from test2 to db2.
* pkgdb/pkgdb/dispatcher.py: PackageDispatcher::_send_log_msg(): New method
  to send log messages to owners and people in approveacls.
  - PackageDispatcher::_user_can_set_acls(): Updated to also return True if
    the user is in cvsadmin.
    + Now returns a string 'admin', 'owner', 'comaintainer' if the user can
      change acls.
  - PackageDispatcher::toggle_owner(): Use _user_can_set_acls() to decide if
    the user can take over the package.
  - All exposed methods use _send_log_message() now.

2007-07-09  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r115
* pkgdb/pkgdb/dispatcher.py: Import AuthError from fas.
* pkgdb/pkgdb/packages.py: import request from cherrypy.
  - Packages::__init__(): Move the dispatcher definition to within __init__()
    so we can give it self.fas as an argument.
  - Packages::name(): Return an error message if we are trying to get json
    formatted data and there's no package by that name.
* pkgdb/pkgdb/static/javascript/pkgpage.js: Couple debung statements
* pkgdb/pkgdb/templates/pkgpage.kid: Fix a regression where the acluser
  field needs to have a name attribute.

2007-07-09  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r114
* pkgdb/pkgdb/packages.py: Remove unneeded cherrypy.request and setting of
  package.*c.* = True.

2007-07-09  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r113
* pkgdb/pkgdb/json.py:
  - jsonify_sa_select_results(): method to serialize sqlalchemy SelectResults.
  - jsonify_salist(): method to parse SQLAlchemy InstrumentedLists.
* pkgdb/pkgdb/model.py:
  - SABase(): New class that is the Base of all sqlalchemy mapped classes.  It
    has a base __json__() method that usually does the right thing.
  - StatusCodeTranslation(): Gets its own __json__ class that does the
    opposite as SABase WRT to properties.  This helps stop infinite recursions.
  - BaseStatus(): New class that is the base of the Status classes.  It has a
    __json__() method that links it to the translations.
    + __init__() method that is common to all the StatusCode classes.
  - PackageStatus(): New class for the status codes that apply to packages.
  - Branch::__repr__(): Fix the output to show the information from Collection
    as well.
* pkgdb/pkgdb/packages.py: Packages::name() and Packages::id(): Reimplement
  the functionality of id in name to make that the default lookup mechanism.
  - Allow name() to return a json string.
  - Simplify to return values by relying on sqlalchemy's mapper instead of
    returning information from more sql'ish calls.
  - No longer need to return package and packageid since the information is
    reachable from the packageListings table.
* pkgdb/pkgdb/templates/pkgpage.kid: Modified to only get information from the
  packageListings variable.  This allows us to not pass packages and packageid.

2007-07-06  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r112
* pkgdb-login.py: Merge sample client code to connect to the packagedb from
  the commandline.

2007-07-06  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r111
* pkgdb/dev.cfg: Remove fedora.accountspath as we now use fedora.accounts
  from python-fedora.
  - Update the dburi to test2.
  - Set sqlalchemy.convert_unicode to True so we convert database strings to
    python unicode automatically.
* pkgdb/pkgdb/acls.py: bind a few variables so we don't have to keep doing
  [] dereferences.
* pkgdb/pkgdb/controllers.py: Write a method to help test for unicode
  conformance.
* pkgdb/sample-prod.cfg: Add some updates from dev.cfg.

2007-07-03  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r110
* pkgdb/pkgdb/controllers.py: Test::index(): Allow json format.
  - Root::login(): Changes to allow logging in from the command line.

2007-06-28  Toshio Kuratomi <toshio@tiki-lounge.com> - r109
* pkgdb-import.py: Change packagedb host to test2.
  - Change Collection names to match bugzilla product names.
  - New method set_special_owners() that sets ownership to a mailing list for
    certain special packages.

2007-06-26  nigelj <nigelj@test3.fedora.phx.redhat.com> - r108
Remove pkgmine.kid, add userpkgs.kid, and change users.py to reflect

2007-06-26  nigelj <nigelj@test3.fedora.phx.redhat.com> - r107
pkgpage.kid: Add link to maintainers user page
layout.kid: Add link to users page
packages.py: Add pkg.owneruser/person.user for templating
users.py: All my additions (no_user,acllist,packages etc)

2007-06-26  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r106
* pkgdb/pkgdb/acls.py: Acls::_add_to_bugzilla_acl_list(): Fix renamed variable.
    + Fix the level at which the cclist is called.  There is only one acl for
      bugzilla as opposed to several for vcs.
  - Acls::vcs(): We were skipping adding the owner to the acl after an orphaned
    package had been scanned.  Change to properly skip adding the owner if the
    present package is orphaned.
  - Acls::bugzilla(): Correct capitalization of userId.
    + When selecting the owner, get it from PackageListing, not Package.
    + We were retrieving all of the watchbugzilla acls for every package.
      Corrected to only retrieve the acls once.
* pkgdb/pkgdb/templates/bugzillaacls.kid: Fix up the bugzillaacls template to
  display the information nicely.

2007-06-26  Toshio Kuratomi <toshio@tiki-lounge.com> - r105
* Merge from upstream.

2007-06-26  Toshio Kuratomi <toshio@tiki-lounge.com> - r104
* pkgdb/pkgdb/templates/bugzillaacls.kid: Template for bugzilla ACLs.
* pkgdb/pkgdb/acls.py: BugzillaInfo() class for returning a record for a
  bugzilla product-component pair.
  - Acls::_add_to_bugzilla_acl_list(): New method to add an acl to a
    BugzillaInfo record.
  - Acls::_add_person_to_acl() renamed to _add_to_vcs_acl_list().
    + Make the method generic enough to accept either people or groups.
  - Acls::vcs(): Use _add_to_vcs_acl_list() for groups.
  - Acls::bugzilla(): Return information needed to create and maintain bugzilla
    records.

2007-06-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r103
* pkgdb/pkgdb/static/javascript/framework.js: spin_spinner(): Fix a bug
  quoting a key for a dict.

2007-06-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r102
* pkgdb/pkgdb/acls.py: New file with a controller, Acls() that shows the
  acls on packages.  Currently just one method that shows the acls on the
  cvs repository.
* pkgdb/pkgdb/collections.py: Pull the Collections controller out of
  controllers.py into its own file.
* pkgdb/pkgdb/templates/vcsacls.kid: template for displaying cvs acls.
* pkgdb/pkgdb/config/app.cfg: Set the idle timeout to 20 minutes.
* pkgdb/pkgdb/controllers.py: Push the Collections controller to its own file.
  - Mount the acls controller and user controller as well.
* pkgdb/pkgdb/dispatcher.py: The ORPHAN_ID constant is needed here too.
* pkgdb/pkgdb/users.py: packages(): Add the fasName as an argument.

2007-06-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r101
* genacls.pkgdb: Output the cvs acl script's avail file via the packagedb.

2007-06-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r100
* pkgdb-import.py: Updated and renamed from owners.py.
  - Now parses all the owners.list and pkg.acl files via nottings owners.py
    module.  This is stored in the extras/CVSROOT/admin.

2007-06-18  nigelj <nigelj@test3.fedora.phx.redhat.com> - r99
- Add new links to menubar on left
- Place 'My Packages' somewhere decent

2007-06-18  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r98
* pkgdb/pkgdb/controllers.py, pkgdb/pkgdb/dispatcher.py: Move turbomail import
  into dispatcher.
  - Move common parts of turbomail calls into its own function.

2007-06-18  nigelj <nigelj@test3.fedora.phx.redhat.com> - r97
I thought I got this finalised, I'll sort it out later

2007-06-18  nigelj <nigelj@test3.fedora.phx.redhat.com> - r96
Fix up test/mine I'll move it when it becomes complete (and after some discussion)

2007-06-17  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r95
* Syncing of pkg.acl and new owners.list is done.  However, bugzilla has to be
  redone to take advantage of bugzilla's xml-rpc interface.

2007-06-17  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r94
* pkgdb.conf: Add an entry for josemm to work on his own branch and be able to
  see what's going on.

2007-06-17  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r93
* pkgdb/pkgdb/dispatcher.py, pkgdb/pkgdb/packages.py,
  pkgdb/pkgdb/controllers.py: Pull the Packages() and PackageDispatcher()
  classes into their own files

2007-06-17  nigelj <nigelj@test3.fedora.phx.redhat.com> - r92
- Allow cvsadmin to orphan
- Show 'my packages' (needs bug fixes)
-- N.J.

2007-06-12  nigelj <nigelj@test3.fedora.phx.redhat.com> - r91
Small changes to nav bar on left, including a right nav bar like in FAS

2007-06-12  nigelj <nigelj@test3.fedora.phx.redhat.com> - r90
* Changed secure images/urls to point to admin.fp.o
* Changed copyright/trademark links
* Added Package DB home link

2007-03-24  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r89
* pkgdb/pkgdb/static/javascript/pkgpage.js: set_acl_approval_box(): Add a
  requestContainer around the acl checkboxes.  This allows the make_request
  framework to function correctly.

2007-03-24  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r88
* pkgdb/pkgdb/static/javascript/pkgpage.js: request_acl_gui(): Fix generation
  of the checkboxes so that it has an empty aclStatus span.  Otherwise we have
  errors when taking ownership.

2007-03-23  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r87
* pkgdb/dev.cfg: set baseurl as apache was giving out pkgdb instead of pkgdb-dev
* pkgdb/pkgdb/controllers.py: Packages::name(): Add error handling if the
  packagename is not known.
  - Packages::not_packagename(): New function to handle unknown packagename's
    being tried.

2007-03-23  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r86
* pkgdb/pkgdb/templates/orphans.kid: Template to display orphaned packages.

2007-03-23  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r85
* pkgdb/pkgdb/controllers.py: Test::orphans(): List by name and send summary
  info as well.
* pkgdb/pkgdb/templates/collectionpage.kid,
  pkgdb/pkgdb/templates/pkgoverview.kid: Construct URLs based on name rather
  than id.
* pkgdb/pkgdb/templates/overview.kid: Add a timeline.

2007-03-22  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r84
* pkgdb/pkgdb/controllers.py: An orphan reporting page at test/orphans.  Needs
  work to be more useful.
  - Packages::name(): New method to allow us to find packages via package name
    in the URL.
* pkgdb/pkgdb/templates/collectionoverview.kid,
  pkgdb/pkgdb/templates/collectionpage.kid,
  pkgdb/pkgdb/templates/pkgoverview.kid, pkgdb/pkgdb/templates/pkgpage.kid:
  Remove the layout_params block and some outdated notes.
* pkgdb/pkgdb/templates/layout.kid: Add a "You are not logged in" message.
* pkgdb/pkgdb/templates/overview.kid: Update with new 0.2.90.1 features.

2007-03-22  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r83
* pkgdb/pkgdb/templates/layout.kid: Remove the right side bar.
  - Give useful links in the left menu bar.
  - Real changes to this are going to wait on a redesign from the website/art
    team or Maírín Duffy.
* pkgdb/pkgdb/templates/overview.kid: Bump version to 0.2.90.1.

2007-03-22  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r82
* pkgdb/pkgdb/static/javascript/pkgpage.js: Remove a debug class.

2007-03-22  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r81
* pkgdb/pkgdb/controllers.py: PackageDispatcher::__init__(): Remove
  aclStatusMap as we've replaced all instances of it with a call directly into
  the database.
  - set_acl_status(): Rename personPackage to changePerson in one portion of
    the method.  That way if we ever reference changePerson in the rest of the
    method we'll be sure it's defined here.
    + Rewrite some code to allow directly setting a person record instead of
      appending to the end of an acl list.
    + Add package and collection information to the log message so we know
      what the acl was set on.
  - toggle_groupacl_status(): Speed this up by not setting changeAcl.status.
    This lets changeAcl.status go out of sync byt it is 10x faster.
    + Remove the use of aclStatusMap.
    + Perform logging.
  - toggle_acl_request(): Remove use of aclStatusMap.
    + Perform logging.
* pkgdb/pkgdb/model.py: GroupPackageListingAcl::__init__(): Make
  grouppackagelistingid optional.
* pkgdb/pkgdb/static/javascript/pkgpage.js: check_acl_request(): Fix saving of
  the aclStatus container so it has both the acl name and pkgId.
* pkgdb/pkgdb/templates/overview.kid: Log to db is finished.
  - Notification of acl/owner changes can be sent to commits-list at any time
    so that's finished.
  - Add note to have UI for people to review changes to the PackageDB.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r80
* pkgdb/pkgdb/controllers.py: PackageDispatcher::_user_can_set_acls(): Switch
  from using aclStatusMap to getting the values from statustranslation table.
  - Add notes where we want to send reports to a per package group of people
    as well.
  - packageDispatcher::set_acl_status(): Fix the identity check to use
    in_any_gorup instead of in_group.
    of the required groups.
    + Fix a typo in an assignment (= instead of ==).
    + Fix typo in defining the logMessage (, instead of .).
    + Make logMessage and subject of email clearer.
  - packageDispatcher::toggle_groupacl_status(): Fix identity check to use
    in_any_group instead of in_group.
* pkgdb/pkgdb/static/javascript/pkgpage.js: request_status_change(): Change
  status to statusname when requesting information from /set_acl_status.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r79
* pkgdb/pkgdb/controllers.py: PackageDispatcher: Initial preparations for
  allowing package acls to be set by people in cvsadmin:
    + __init__(): Add cvsadmin to self.groups
    + For each method requiring an identity, add cvsadmin as well.
  - set_acl_status(): Log to database and email that a change has occurred.
    + Convert to using status.statuscodeid from the db instead of statusMap.
  - toggle_groupacl_status(): Change the order of arguments for
    GroupPackageListingAcl.
* pkgdb/pkgdb/model.py: Change all the comments for the mapper classes into
  docstrings.
  - Make __repr__() strings aware of kwargs.
  - Add classes and mappers for Person and Group PackageListingAclLogs.
* pkgdb/pkgdb/templates/overview.kid: Add allowing cvsadmin to make changes
  to an Urgent category.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r78
* pkgdb.sql: Correct some comments now that the ACL structure has been updated.
* pkgdb/pkgdb/controllers.py: PackageDispatcher::toggle_owner(): Have the
  log message use human readable names instead of the pakcage/person id.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r77
* pkgdb.sql: Add Owned and Orphaned statuses to StatusCode and
  PackageListingStatusCode.
  - CollectionLog: Change packageId to collectionId (Fix cut and paste error)
  - grant select and insert on CollectionLog.
  - Add a comma to grant select statement.
* pkgdb/pkgdb/controllers.py: import turbomail
  - Set Global vars, FROMADDR and TOADDR from the turbogears config.  I think
    we'll switch everything to using turbogears.config in the near future.
  - Uncomment turbogears.enqueue.  We're doing local testing for now.
* turbogears.mod, turbogears.pp, turbogears.te: Changes to allow turbomail to
  connect to the smtp server.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r76
* Merge a bugfix from the production branch.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r75
* pkgdb.conf: Add static/ directory defintions for both pkgdb and pkgdb-dev
  so that we can get both.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r74
* pkgdb/pkgdb/model.py: Add the literal_column() fix to the log mappers.
* pkgdb/pkgdb/templates/overview.kid: Bump version to 0.2.90.0.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r73
* Merge fixes in from the production branch.

2007-03-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r72
* Merge with the production branch.

2007-03-20  Toshio Kuratomi <toshio@tiki-lounge.com> - r71
* pkgdb/pkgdb/config/app.cfg: Set up TurboMails settings.
* pkgdb/pkgdb/controllers.py: PackageDispatcher::toggle_owner(): Initial cut
  at saving a log message in the database and sending notification via email.
* pkgdb/pkgdb/model.py: New mapper classes Log and PackageListingLog.  These
  are for log tables in the database.

2007-03-15  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r70
* pkgdb/pkgdb/templates/overview.kid: Write up the changes for 0.2.

2007-03-15  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r69
* pkgdb/pkgdb/static/javascript/framework.js: Remove a few debugging statements
* pkgdb/pkgdb/static/javascript/pkgpage.js: set_acl_approval_box(): When
  rewriting the requestContainer, be sure we include the pkgid in the id.
    + When retrieving the selected item from the select list, user select.value
      Instead of trying to parse the options for the one that's selected.
* pkgdb/pkgdb/templates/pkgpage.kid: Add a name attribute to the aclStatusList
  that is the aclname.
  - Be sure we include the pkg.id in the name for the spans that replace the
    aclStatusList when it's in read-only mode.

2007-03-15  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r68
* pkgdb/pkgdb/static/javascript/pkgpage.js: set_acl_approval_box(): Add code
  to change the groupacl boxes as well.
  - check_groupacl_request(): Recreate the checkbox on success so that the
    browser picks up the correct state of the checkbox.

2007-03-15  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r67
* pkgdb/pkgdb/static/javascript/pkgpage.js: set_acl_approval_box(): Fix
  problem where we were looking for an aclStatus when we should have been
  looking for aclStatusList.
* pkgdb/pkgdb/templates/pkgpage.kid: Add a span to display an empty label
  when the acl is not defined.
  - Rename the group's aclcell to groupaclcell so it isn't picked up by js
    code that is looking for all the person acls.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r66
* pkgdb/pkgdb/controllers.py: PackageDispatcher::__init__(): Make group id an
  integer.
  - PackageDispatcher::toggle_groupacl_status(): Return an error to the client
    instead of trying to raise it.
    + Fix an =/== typo.
    + Fix a missing comma.
    + return success at the end of the method.
* pkgdb/pkgdb/static/javascript/pkgpage.js: New functions:
  check_groupacl_request() and revert_groupacl_request() which take care of
  toggling groupacls on and off.
  - request_approve_deny_groupacl(): Callback to commit changes to the group
    acls to the server.
  - init(): Add an event handler for the groupacl checkboxes.
* pkgdb/pkgdb/templates/pkgpage.kid: Change groupAclStatus requestContainers
  back into divs as the javascript expects that.
  - Move the label inside the div.
  - Add the groupid to the name attribute of the requestContainer.
  - Change checkboxes from groupAclPresentBox to groupAclStatus(Label)Box.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r65
* pkgdb/pkgdb/controllers.py: PackageDispatcher::__init__(): Create a groups
  variable that holds the groups that can commit to Packages.
  - PackageDispatcher::_user_can_set_acls(): Extract a method that checks
    whether a given user is allowed to change acls for a given packagelisting.
  - set_acl_status(): Move the check of whether the user can set the acl into
    its own function.
  - toggle_groupacl_status(): toggle the groupacl flag between Approved and
    Denied.  We might want to make this more generic in the future but it'll
    work for our present needs.
* pkgdb/pkgdb/templates/pkgpage.kid: Fix typo acell => aclcell.
  - Change the container from a div to a span.
  - Add the groupid to the name attribute.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r64
* pkgdb.sql: Notes on how to populate the testdb with group information.
* pkgdb/pkgdb/templates/pkgpage.kid: Move the aclChange information out to the
  toplevel.  There's nothing being processed here that requires being in a
  loop.
  - Fix display of the Group Acl information.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r63
* Since we've removed build and checkout from the list of acls to grant, we
  have to remove them from here as well.  This should be done via a JSON call
  but oh well.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r62
* pkgdb/pkgdb/templates/pkgpage.kid: Add code to check whether the person has
  already expressed interest in a package.  If they haven't give them a button
  to request acls.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r61
* pkgdb/pkgdb/templates/pkgpage.kid: Move the decision about aclChanger
  outside of a loop.
  - Fix processing of status labels.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r60
* pkgdb/pkgdb/controllers.py: Special case acls of Obsolete status to be blank
  for the user.
* pkgdb/pkgdb/templates/pkgpage.kid: Remove an extranaous check for the orphan
  user.
  - Resort to a ?python processing directive to check whether a person is
    allowed to approveacls.  kid doesn't want to mix tg.identity with filter/
    lambda otherwise we could have done it that way.
  - Get things working through setting status via the dropdown menus.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r59
* pkgdb/pkgdb/controllers.py: Fix return of the new aclStatus.
* pkgdb/pkgdb/templates/pkgpage.kid: Make sure the template works up to
  displaying and allowing the user to update their acl requests.

2007-03-14  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r58
* pkgdb.sql: Add a comment to convert the status => status code as well.
* pkgdb/dev.cfg: Change the database we talk to for the development version.
* pkgdb/pkgdb/templates/pkgpage.kid:
  - Change erroneous statuscode references to status.
  - Get the template working up to displaying the names of people who hold ACLs

2007-03-14  Toshio Kuratomi <toshio@tiki-lounge.com> - r57
* pkgdb/pkgdb/controllers.py: PackageDispatcher::id(): Setup acls to be
  accessible from the template via aclName.
  - Set up groups similarly to people.
* pkgdb/pkgdb/templates/pkgpage.kid: Update for the new acl structure.  This
  will need debugging.

2007-03-13  Toshio Kuratomi <toshio@tiki-lounge.com> - r56
* pkgdb/pkgdb/controllers.py: Remove AclOwners as it isn't used anymore.
  - Packages::id(): Retrieve information from the FAS about the packagelisting
    people as we still want to use this in the view.

2007-03-13  Toshio Kuratomi <toshio@tiki-lounge.com> - r55
* pkgdb/pkgdb/controllers.py: Remove build and checkout acls from the list of
  acls to send to the view.  We won't do build until we integrate with koji.
  We won't do checkout for now as we aren't embargoing anything.

2007-03-13  Toshio Kuratomi <toshio@tiki-lounge.com> - r54
* pkgdb/pkgdb/controllers.py: Packacges::id(): Pull out the section that
  reformats acls so they're easy to lookup per user.  We now save the
  information in the database per user so this isn't necessary.

2007-03-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r53
* pkgdb/pkgdb/controllers.py: Update toggle_acl_request to use the new acl
  schema.

2007-03-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r52
* pkgdb/pkgdb/controllers.py: Update PackageDispatcher::set_acl_status() to
  work with the new acl schema.

2007-03-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r51
* pkgdb/pkgdb/controllers.py: Change status to statuscode.
* pkgdb/pkgdb/model.py: Remove the commented PackageAclTable,
  PersonPackageAclTable, and GroupPackageAclTable definitions.

2007-03-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r50
* pkgdb.sql: Change all status entries to statuscode.  Statuscode will be used
  when referencing the numeric id of a status.  Status will be used within the
  sqlalchemy appings to link to the status tables.
  - PackageACL, PersonPackageACL, GroupPackageACL: Deleted these.  See below
    for the summary of how this has changed.
  - PersonPackageListing, GroupPackageListing, PersonPackageListingAcl,
    GroupPackageListingAcl: We have rearranged the ACL tables.  All the
    operations we've performed so far have needed to know which people/groups
    hold acls on a package rather than which acls are held on a package.  So
    it makes more sense to have the packagelisting directly connected to the
    person/group.  ACLs depend off of these tables.
  - no_group_acl_update_trigger, no_person_acl_update_trigger: Set this to
    trigger on the new acl tables instead of the old PackageAcl table.
  - PersonPackageACLLog, GroupPackageACLLog, PersonPackageListingAclLog,
    GroupPackageListingAclLog: These tables were renamed and updated with
    foreign key constraints on the new acl tables.
  - grant select, insert, and update to the new ACL tables.
  - grant select and insert to the new log tables.
  - Add some notes on how to migrate old data to the new table structure.
* pkgdb/pkgdb/model.py: General cleanups.  Add comments to all our classes.
  - Add __repr__ functions to all our classes.
  - Replace the old ACL representations with the new ones.
  - Rename all status's from the database to statuscode fields.  Rename
    statuscode properties to status.
  - Update the list of tables that do not yet have mappers.

2007-03-09  Toshio Kuratomi <toshio@tiki-lounge.com> - r49
* Merge against the devel branch.

2007-03-01  Toshio Kuratomi <toshio@tiki-lounge.com> - r48
* Merge a fix for the GroupPackageAcl constructor.

2007-02-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r47
* Merge from the development branch.  This should bring us to all the features
  from owners.list except the ability to approve Acls.

2007-02-20  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r46
* Merge from the development tree.  This finishes the intro-level interface
  surrounding changing the owner.

2007-02-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r45
* Merge a few cosmetic issues from devel.

2007-02-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r44
* Merge from the development branch.  Only difference is not to set the port
  and URL to the devel versions.

2007-02-10  Toshio Kuratomi <toshio@tiki-lounge.com> - r43
* Merge with the devel tree.

2007-02-10  Toshio Kuratomi <toshio@tiki-lounge.com> - r42
* README: Update: owners.list nearly done, No plans to import RHL data,
  ACLs need to be imported from CVS, fix the download location for repomd.xml,
  Add a TODO to push ACLs from packagedb changes instead of pulling them in via
  a cron job.
* owners.py: We now have an account for extras-orphan, comment it out so the
  script imports this properly.
* pkgdb.sql: Lowercase tablenames in the functions.

2007-01-29  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r41
* pkgdb.conf:  Add ProxyPreserveHost directive.
* pkgdb.sql: Add plpgsql language.
* pkgdb/pkgdb/config/app.cfg: Move base_url_* to the global section.  Use an
  explicit base_url as redirects are giving us problems.
* pkgdb/pkgdb/controllers.py: For redirects, have to retrieve the base_url from
  the config file as the base of the url.
  - AclOwners(): Add an acls set of fields to the class.
  - Packages::id():
    + Define the aclNames.
    + Pass the people in with a dict of the acls they have.
    + Pass the aclNames into the template.
  - Packages::unknown(): Fix some typos.
  - Packages::not_id(): Added for pakcage ids that don't exist.
  - Root::login(): Add a title.
  - Root::logout(): get the redirect using request.headers so that it goes
    to the proper url.
* pkgdb/pkgdb/model.py: PackageACL, PersonPackageACL, and GroupPackageACL
  have been added, take them out of the TODO list.
* pkgdb/pkgdb/templates/layout.kid: Import a stylesheet for the pkgdb.
  - Add some style for the login box.
  - Add a login button to the top of every page.
* pkgdb/pkgdb/templates/login.kid: Have login.kid inherit from our Fedora
  layout template.
* pkgdb/pkgdb/templates/master.kid: Use tg.url to make this work.  master.kid
  isn't used on our master site, though, so this should probably be deleted
  soon.
* pkgdb/pkgdb/templates/pkgpage.kid: Make a separate table for each pkglisting.
  - Make the acl tables more appealing.

2007-01-28  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r40
* pkgdb/pkgdb/controllers.py: Add an acl owners class to pass acl information
  into the templates.  Not sure if we want to define this in the model as an
  sqlalchemy "view".
  - Packages::index() Add the paginate dcorator so we can actually display all
    the packaes in a sane manner.
  - Packages::id(): Retrieve co-wnership information from the database as well.
* pkgdb/pkgdb/model.py: Set up three new mappers for PackageAcl,
  PersonPackageAcl, and groupPackageAcl.
* pkgdb/pkgdb/templates/pkgoverview.kid: Create a list of all the packages we
  know about.
* pkgdb/pkgdb/templates/pkgpage.kid: First hack at displaying the acl
  information.

2007-01-26  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r39
* pkgdb/pkgdb/config/app.cfg: Add basurl_filter to inform cherrypy of the
  /pkgdb/ path prefix.
* pkgdb/pkgdb/controllers.py: Get paginate working.  This requires paginate
  and session from turbogears and selectresults from sqlalchemy.
  - Decorate colletion::id() with paginate.  Set the defaults to 100 records
    and display at most thirteen pages.  This should be more normal for
    Fedora Developers.
  - Use a SelectResult to retrieve the packages/packagelistings for this
    collection.  SelectResults works with paginate.
* pkgdb/pkgdb/model.py:  Add the foreign key relation between Package and
  PackageListing to the mapper so we can reference the values hierarchically
  in python.
* pkgdb/pkgdb/templates/collectionpage.kid: Add paginate awareness to the
  template.  We can now page through the list of packages instead of seeing it
  all on one page.

2007-01-23  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r38
* pkgdb/pkgdb/controllers.py:
  - Collection::id(): Use both human name and username to fill the ownername
    field as the human name is not guaranteed to be unique.
  - Package::id(): Fix a typo '=' => '=='.
    + Retrieve human names for pkg.ownername and pkg.qacontact.
    + Send the results of pkgListingRows.fetchall() instead of the raw cursor
      as the cursor will be losed by the time it gets to kid.
* pkgdb/pkgdb/templates/pkgpage.kid: Define TODO as a Not Implemented message.
  - Remove spaces in our anchor links.
  - Merge the headings and data into one table.
  - Remove notes of things that have been implemented.

2007-01-21  Toshio Kuratomi <toshio@tiki-lounge.com> - r37
* README: Update for the current status.
* pkgdb/pkgdb/controllers.py: Note that paginate is coming for 1.0.1.
  - Create queries for the individual package pages.
  - Add an unknown() page for Package.
* pkgdb/pkgdb/templates/pkgpage.kid: Fill it with content.

2007-01-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r36
* pkgdb.conf: Enable apache serving static files for TG.

2007-01-21  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r35
* pkgdb.conf: Modify rewrite rules so we don't end up with a double slash.
* pkgdb/pkgdb/controllers.py:
  - Test(): Require that the user be in cvsextras to view this.
  - Fix what we expect to be returned from fas.get_user_info().
  - Revert the previous_url = server.webpath request.path change as the root
    problem was in a duplicate apache Proxy configuration on this particular
    computer.
* pkgdb/pkgdb/templates/collectionpage.kid: Use the human name of the owner
  instead of their userId.

2007-01-20  Toshio Kuratomi <toshio@tiki-lounge.com> - r34
* pkgdb.conf: Make sure our encoding is unicode.
* pkgdb.sql: Change from TG_TABLE_NAME to TG_RELNAME.  TG_RELNAME doesn't
  appear until postgresql 8.2.
  - Note that add_status_to_log() and no_acl_update are tested.
  - New table CollectionLogStatusCode that has Collection actions.
  - New table CollectionLog to record changes to collections.
  - Some notes on how to implement categories and groups.
* pkgdb/pkgdb/controllers.py: Import a logger.
  - Use the fedora.accounts.fas module instead of website.

2007-01-19  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r33
* pkgdb.conf:
  - Prevent the RewriteRules from applying if we're loading the autostart
    script.  This stops us from attempting to spawn multiple instances of the
    pkgdb.
  - Add /pkgdb/ to the rewritten URL to simplify the munging we do from within
    the turbogears app.
* pkgdb/dev.cfg: Add base_url_filter.on and
  base_url_filter.use_x_forwarded_host which is supposed to do server.webpath
  type stuff for cherrypy.
* pkgdb/pkgdb/controllers.py: Change test and Packages into Controllers instead
  of RootController.
  - login(): Construct the previous_url from server.webpath + the request.path.
    This allows Apache proxying to work correctly.
  - Remove the response.status = 403 code.  This was causing Apache to issue
    forbidden instead of showing the login page.
* pkgdb/sample-prod.cfg: Set server.webpath.

2007-01-19  Toshio Kuratomi <toshio@tiki-lounge.com> - r32
* Merge changes from our working branch.

2007-01-10  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r31
* tg-autostart.cgi: kill prior occurrences of the TurboGears app server before
  starting the new instance.

2007-01-04  Toshio Kuratomi <toshio@tiki-lounge.com> - r30
* pkgdb/pkgdb/controllers.py: Collections::id():
  - Retrieve Collection information with symbolic statusname instead of code.
  - Retrieve package information as well.
* pkgdb/pkgdb/model.py: Add mappers for: StatusTranslation and CollectionStatus.
  - Add constructors for all the existing classes that will set the table's
    not null fields.
* pkgdb/pkgdb/templates/collectionpage.kid: Add Status and Owner, Summary, and
  Description information.  Add a first Package List.

2007-01-02  Toshio Kuratomi <toshio@tiki-lounge.com> - r29
* pkgdb.conf: Add a RewriteRule to handle URLs without hte trailing slash.
* pkgdb/dev.cfg: Add server.webpath so URLs in the TG app have /pkgdb
  added to them in the proper place.
* tg-autostart.cgi: Update for the new placement of the packagedb directory on
  my local test machine.

2007-01-02  Toshio Kuratomi <toshio@tiki-lounge.com> - r28
* pkgdb/pkgdb.egg-info/requires.txt, pkgdb/setup.py: Need bugfixes present in
  SQLAlchemy >= 0.3.2.
* pkgdb/pkgdb/controllers.py, pkgdb/pkgdb/templates/collectionoverview.kid:
  - Page displaying all the collections of Fedora Packages we know about.
    This now displays the number of packages in a collection.
* pkgdb/pkgdb/templates/collectionpage.kid: Placeholder.  This template will
  display information about a specific collection along with the packages in
  the collection.
* pkgdb/pkgdb/templates/errors.kid: An error page.
* pkgdb/pkgdb/templates/overview.kid: Package Database Front Page.
* pkgdb/pkgdb/model.py: Remove the class_mapper hack needed for
  SQLAlchemy <= 0.3.1.

2007-01-01  Toshio Kuratomi <toshio@tiki-lounge.com> - r27
* README: Add Package Reviews.
  - Restructure TODO list into Versions when features are likely to be done.
* pkgdb/dev.cfg: Update to turbogears 1.0b2 and sqlalchemy.
* pkgdb/pkgdb.egg-info/requires.txt: Update for TurboGears-1.0b2.
* pkgdb/pkgdb/config/app.cfg: Update for TG-1.0b2 and the identity framework.
* pkgdb/pkgdb/controllers.py:
  - Update for TG-1.0b2
  - Add an overview front page, Collection and Packages hierarchies.
  - Query the sqlalchemy model for database information.
* pkgdb/pkgdb/json.py: Update for TG-1.0b2.
* pkgdb/pkgdb/model.py: Change to SQLAlchemy.
  - Create OR-Mappers for Collecion, Branch, Package, and PackageListing.
  - List other Tables that we'll want to map.
  - Visit tables as generated by TG-1.0b2.  Need to modify this to work with
    the Fedora Account System instead of tables within the pkgdb.
* pkgdb/pkgdb/static/css/style.css, pkgdb/pkgdb/templates/login.kid,
  pkgdb/pkgdb/templates/master.kid, pkgdb/pkgdb/templates/welcome.kid,
  pkgdb/pkgdb/tests/test_model.py, pkgdb/sample-prod.cfg, pkgdb/setup.py,
  pkgdb/start-pkgdb.py: Update to TG-1.0b2.

2006-12-29  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r26
* owners.py: Owners: Correctly nest when we save the owners data -- previously
  we were only saving when a package had watchers.

2006-12-28  Toshio Kuratomi <toshio@tiki-lounge.com> - r25
* owners.py: Add a new preseed account for rvokal@redhat.com.

2006-12-28  Toshio Kuratomi <toshio@tiki-lounge.com> - r24
* README: Put alerting packagers when a dependency of their package is updated
  on the wishlist.
* owners.py: Version 0.2.
  - Convert from python % format for constructing database queries to pyformat.
  - Add the path to fedora-accounts on my local machine.
  - CVSReleases: __init__(): If not given a cvs module file to work with,
    return that all packages are present in the devel version of the repo.
  - PackageDB():
    + _add_acl(): Set an acl for a PackageListing.
    + import_data():
      * Update insert queries to use StatusCodes instead of text values.
      * Only create a new PackageListing entry if one does not already exist.
      * Create ACLs in the new PackageACL tables instead of the old, broken
        package_interest style.
  - __main__(): Create a cvsModule object even if no module filename was given.
* pkgdb.sql: Allow sequences for primary keys to be updated.
  - Allow pkgdbadmin to select from all tables.
* pkgdb/pkgdb/model.py: Add an soClasses attribute to order class creation.
  This is a hack for sqlobject and will probably go away as we transition
  to sqlalchemy.

2006-12-27  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r23
* APPROVED_trim.txt: List of package review approvals that went to
  fedora-extras-list (pre-bugzilla review days).
* REQUESTS_trim.txt: List of package review requests that went to
  fedora-extras-list.
* build_list: Build a csv file from the APPROVED and REQUESTS files.

2006-12-22  Toshio Kuratomi <toshio@tiki-lounge.com> - r22
* pkgdb.sql: PersonPackageACL, GroupPackageACL:
  - Remember to make id a primary key.
  - Make the packageACLId not null.

2006-12-22  Toshio Kuratomi <toshio@tiki-lounge.com> - r21
* pkgdb.sql: Version 0.4
  - Remove all null attributes as null is the default.
  - Add on delete and on update to all foreign key constraints.
  - Pull status codes into their own tables to make translation easy.
  - Triggers to keep the status/action fields of Logs in sync with the
    status fields of the tables they reference.
  - Branch: Make branchName and distTag unique.
  - CollectionSet: Add a priority field to specify the search order when
    overlaying Collections.
  - Rename PackageVersion* tables to PackageBuild*.
  - Trigger to make sure that PackageBuildListing references a PackageBuild
    and PackageListing that point to the same Package.
  - PackageACL, PersonPackageACL, GroupPackageACL: Revamp so ACL lists now
    can have one record for every ACL-Package combination.  *PackageACL
    tables add users and groups to the relevant ACL.
  - Trigger to make changing the acl field illegal.  This prevents possible
    changes to the acl to gain extra privleges.
  - Log: Add a description field.
  - *PackageACLLog: Split PackageACLLog into PersonPackageACLLog and
    GroupPackageACLLog.
  - Add some grant statements.  Need to reaudit these after we settle on what
    tables will be in the final PackageDB.

2006-12-04  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r20
* pkgdb/pkgdb/model.py: Add a URL field for the review ticket.

2006-12-03  Toshio Kuratomi <toshio@tiki-lounge.com> - r19
* pkgdb.sql: Fix bugs and typos in the schema.

2006-12-03  Toshio Kuratomi <toshio@tiki-lounge.com> - r18
* pkgdb.sql: Commit a new version of the pkgdb schema in SQL.  SQLObject
  is somewhat limited in what it can do so I'm defining this in SQL.  Will
  try to load it and then have SQLObject or SQLAlchemy load the model from
  the database definition.

2006-11-26  Toshio Kuratomi <toshio@tiki-lounge.com> - r17
* owners.py:
  - Change the database name from packagedb to pkgdb
  - Use python's logging module to record errors
  - When we encounter "Fedora-Extras", treat it as if it were "Fedora Extras"
  - CVSReleases(): New object to pull information from a cvs modules file
    about which packages exist on which FC branches.
  - Finish the importer that adds packages to the database.
* pkgdb/pkgdb/model.py: Add a buildonly role to the PackageInterest table.

2006-10-16  Toshio Kuratomi <toshio@tiki-lounge.com> - r16
* pkgdb.conf: Switch from ProxyPass to a RewriteRule.  This fixes some errors
  where pulling up TG pages would open the front page instead of the correct
  sub-page.
* pkgdb/pkgdb/templates/pkgoverview.kid: Revert the URL change.  The errors
  were occuring because of proxyPass flakiness, not this URL.
* tg-autostart.cgi: Pass the path on to the TG server when starting the server
  for the first time.

2006-10-16  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r15
* http.avc: More AVC messages of things that we have to allow in order to run
  autostart.
* pkgdb/pkgdb/templates/pkgoverview.kid: URLs to local resources have to
  use /pkgdb/ so apache passes the request off to the TG Server.

2006-10-15  Toshio Kuratomi <toshio@tiki-lounge.com> - r14
* README: Add Priorities to the importer tasks.
* pkgdb.conf: Add a comment for the testing path on my local computer.
* tg-autostart.cgi: Remove a debugging print statement.

2006-10-15  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r13
* http.avc: AVC messages that we have to create and SELinux module for.
  Use audit2allow -i http.avc -M httpd -i http.avc; semodule -i httpd.ppd
* pkgdb.conf: Apache conf file to setup proxying to the turbogears instance.
  Could use some reworking so apache can serve the static data (images, etc)
  while turbogears serves the dynamic data.
* tg-autostart.cgi: CGI Script that starts the turbogears instance if it isn't
  already running.  This is setup in pkgdb.conf so that we first try to read
  data from the TurboGears instance via Proxy settings.  If the TurboGears
  isn't running, then invoke this CGI to start it.
* README: Update withthe pkgdb.conf/tg-autostart.cgi work.
* pkgdb/dev.cfg: Add server.socket_port and server.socket_host variables as
  they seem to be needed in order to run the TurboGears instance.

2006-10-13  Toshio Kuratomi <toshio@tiki-lounge.com> - r12
* README: A roadmap of where we are and where we're going.

2006-10-13  Toshio Kuratomi <toshio@tiki-lounge.com> - r11
* pkgdb/pkgdb/templates/pkgpage.kid: Mock up of what a package page looks like.
* pkgdb/pkgdb/controllers.py:
  - Default TurboGears page is now the test page.
  - Add package page.
* pkgdb/pkgdb/templates/pkgoverview.kid: Mock up the search interface.

2006-10-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r10
* owners.py: Fix up the connection to the database.
  - import_owners(): begin work to save owners information into the database.

2006-10-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r9
* pkgdb: Create a TurboGears project via tg-admin quickstart.
* pkgdb-schema.py: Move to pkgdb/pkgdb/model.py where it will be our
  TurboGears database.
* pkgdb/pkgdb/templates/layout.kid: Generic layout for Fedora Pages.
* pkgdb/pkgdb/templates/pkgoverview.kid: Page for an overview of the
  PackageDB.

2006-10-05  Toshio Ernie Kuratomi <toshio@test3.fedora.phx.redhat.com> - r8
* owners.py: Establish a permanent place to import the website.py module
  from.
  - preseed skvidal's account as well.

2006-09-18  Toshio Kuratomi <toshio@tiki-lounge.com> - r7
* owners.py: Owners::__init__(): print out which name in a line is
  unrecognized when printing errors.
    + Start a section for special handling of watchers (so we can make a
    watcher a group instead of a person)
  - Owners()::__preseed_accounts(): Add most of the unknown accounts in here.

2006-09-17  Toshio Kuratomi <toshio@tiki-lounge.com> - r6
* owners.py: Bug fixes from running against the accounts db.
  - AccountsDB::__init__(), AccountsDB::user_id_from_email(): Save the
    website module as self.website so other methods have access to the module.
  - Owners::__init__(): Don't pass keep the newlines when spliting the owner
    data.
  - parse_commandline(): Fix detection of whether an output file was selected.
  - __main__(): Properly pass in the data, not hte closed file handle.
    + Open the output file for writing, not reading.

2006-09-16  Toshio Kuratomi <toshio@tiki-lounge.com> - r5
* owners.py: Now have two modes of operation.  Mode one parses owners.list and
  saves to a pickle file.  Mode two reads a pickle file and saves the data
  into the database.
  - AccountsDB/PackageDB import the modules necessary to talk to their
    databases when the objects are instantiated.
  - Owners::__init__(): Pass in a string of data from owners.list instead
    of a filename.  This way we can handle errors on the filename outside
    of this class.
    + Change iteration from readlines() to splitlines() to handle the
      change to a string.
  - parse_commandline(): New function that handles validating the command
    line arguments.  The new commanline takes: --file pickleFile or
    --dsn DSN postgresql connection string and an input file which can either
    be an owners.list file or a pickleFile.  Since we're using optparse to
    do this, --help and --version are available as well.
  - __main__():
    + Handle stdin and stdout as sources and destinations for data.
    + __main__() now reads in the file rather than Owners().
    + If we're given a pickled file from the commandline, save it to the
      database.  Otherwise treat it as an owners.list file and save it's
      data into a pickled file.

2006-09-14  Toshio Kuratomi <toshio@tiki-lounge.com> - r4
* owners.py: Comment psycopg2 as this is not available on the fedora
  infrastructure servers.
  - Owners::__init__(): Change collections into a dict as there are no sets in
    python-2.3 (which is what's on the fedora servers.)
    + Preseed the known accounts so we can translate bad email addresses in the
      owners.list into something sensible.
    + Use string concatenation on self.errors as list.append != print.
    + Fix typos: accountsdb => accountsDB.
    + If a qacontact is unknown, set its user_id to 0.
    + Take care of the case where there are no watchers on a package in
      owners.list.
  - Owners::__preseed_accounts(): New private method that preseeds the
    recognized accounts with email address translations.
  - main():
    + Print any errors from parsing the owners.list file.
    + Note that we need to implement a command line switch to either parse
      owners.list and translate email addresses to user_id or save the data
      into the test PackageDB as we're going to have to run this on two
      different sets of servers.
* pkgdb-schema.py:
  - Collections::byNameVersion(): Note that we may be able to implement all
    or some of this via sqlobject's sqlmeta method.
  - PackageListing: Make the package-branch owner mandatory.

2006-09-12  Toshio Kuratomi <toshio@tiki-lounge.com> - r3
* owners.py: Version 0.1
  - Set values for connecting to the db.
  - Use the website module for importing the current accounts system info.
  - AccountsDB abstract the accounts system db into this object so we are a
    bit safer when the Account System 2 code is released.
    + This class provides the user_id_from_email() method to get the
      user_id for an email address.
  - OwnerError: Exception for errors thrown in the Owners class.
  - Owners: Class that pulls data out of the owners.list.
    + __init__(): Extracts and validates data from owners.list.  The
      constructor also takes care of translating email addresses into account
      system ids.
    + This class inherits from dict.  Every entry is keyed off the package
      name.
    + Additionally, self.collection tells what collections are used by the
      packages and self.errors has a record of all the errors in the package.
    + PackageDB: Class to push data into the Package Database.
  - main(): Use Owners to load the data from owners.list.
* pkgdb-schema.py: Bump version 0.2
  - Collections: Add to the definition of the name field.  This will be used
    as bugzilla product and to help identify the grouping with a SIG.
  - PackageListing: Added qacontact from owners.list.  This may become more
    useful now that the PackageDB is making it more apparent what this can be
    used for.
    + Remove created field as the date will be in the PackageListingLog anyway.
  - PackageVersion: Remove created field as the date will be in
    PackageVersionLog.
  - Split PackageInterestLog into PackageInterestPersonLog and
    PackageInterestGroupLog.

2006-09-10  Toshio Kuratomi <toshio@tiki-lounge.com> - r2
* owners.py: usage(): Fix a syntax error.
  - Parse the fields of the owners.list into named variables.
* pkgdb-schema.py:
  - Add TurboGears and sqlobject imports and boilerplate so this is a valid
    model for a TurboGears instance.
  - Collection: Expand the Collection class to encompass the metainformation
    in SIGs, assign an owner and version, and some fields for descripions.
    + Start a byNameVersion() function that allows us to select information
      from the database via name + version.  This is because SQLObject doesn't
      support multi-column alternateIDs.
  - Branch: class that holds additional information about a Collection that
    allows us to create a new branch in the VCS.
  - Package: Add an underreview status.
    + Add summary and description fields.
  - PackageListing: Add owner field directly to the packageListing table.  The
    advantage of this is that we can quickly determine orphans and let the
    database enforce a single owner to a package.  The downside is we now have
    to look in both PackageInterest and PackageListing to find out who to
    notify about changes.
  - PackageVersion: Break version apart into epoch, version, and release.
  - PackageInterest is now an inheritable base class for the real tables.
    This is because we now have people and groups that will be interested in
    the Package so we have to have tables for each.
  - New classes PackageInterestPerson and PackageInterestGroup.
  - New class Log that records common items (person and changeTime) for all
    the logging classes.
  - *History tables renamed to *Log tables.

2006-08-28  Toshio Kuratomi <toshio@tiki-lounge.com> - r1
* owners.py: Script to parse owners.list and submit it to a database somehow.
* pkgdb-schema.py: SQLObject (and also TurboGears) schema for the pkgdatabase.
  This was originally Elliot Lee's work and I've just commented everything.

